var h=function(){Z.id="",Z.target=null,Z.type="",Z.depth=0,Z.parentId="",Z.formType=""},T=function(){G.index=void 0,G.parentId=void 0,G.title="",G.url=void 0},w=function(){x.BTNode=null,x.target=null,x.timeout=void 0},i=function(_){var{open:A,focusTabs:L,foldersBefore:z}=_,J=!1;if(A===void 0)J=!0;else U.open=A,j.modalConfigOpen.value=A;if(L===void 0||typeof L!=="boolean")J=!0;else U.focusTabs=L,j.modalConfigFocus.checked=L;if(z===void 0)J=!0;else U.folderBefore=z,j.modalConfigFolders.checked=z;if(J)chrome.storage.local.set(U,void 0)},a=function(_,A,L,z){var J=_[z];_[z]=_[L],_[L]=J;let Q=0;for(let V=A;V<L;V+=1)if(_[V].title.localeCompare(_[L].title)<0)J=_[Q+A],_[Q+A]=_[V],_[V]=J,Q+=1;return J=_[Q+A],_[Q+A]=_[L],_[L]=J,Q+A},g=function(_,A,L){if(L-A<1)return _;let z=[A,L],J=0,Q=0;while(z.length>0){if(A=z.shift(),L=z.shift(),J=Math.floor(Math.random()*(L-A)+A),Q=a(_,A,L,J),Q-1-A>0)z.push(A,Q-1);if(L-(Q+1)>0)z.push(Q+1,L)}return _},D=function(_){let A=0;if(U.foldersBefore){for(let L=0;L<_.length;L+=1){let z=_[L];if(z.url===void 0){if(L!==A){let J=_[A];_[A]=z,_[L]=J}A+=1}}g(_,0,A-1),g(_,A,_.length-1)}else g(_,0,_.length-1);return _},O=function(_,A){_.firstElementChild.firstElementChild.lastElementChild.textContent=A},B=function(_,A,L,z){if(_.url===void 0)$("BookmarkTreeNode.url is undefined");var J=L.content.cloneNode(!0),Q=J.firstElementChild;Q.setAttribute("data-id",_.id),Q.setAttribute("data-depth",String(A)),Q.setAttribute("title",`${_.title}\n${_.url}`);var V=Q.firstElementChild;V.setAttribute("href",_.url),V.style.setProperty("padding-left",`${A*10}px`);var X=V.children[0];X.setAttribute("src",o(_.url));var K=V.children[1];if(K.textContent=_.title,z!==void 0){var Y=Q.lastElementChild,W=z.content.children,R=W[2].cloneNode(!0),y=W[5].cloneNode(!0);y.classList.add("c_center-children"),Y.appendChild(R),Y.appendChild(y)}return Q},M=function(_,A,L){const z=_.firstElementChild;z.setAttribute("href",L),z.lastElementChild.textContent=A},m=function(_,A,L,z,J,Q){var V=[L],X=[_],K=-1,Y,W;while(X.length>0)if(Y=X[X.length-1],Y.children===void 0||K+1===Y.children.length){if(X.pop(),Y.index===void 0)$("BookmarkTreeNode.index is undefined");if(K=Y.index,W=V.pop(),V.length>0)V[V.length-1].appendChild(W);A-=1}else{if(Y=Y.children[K+1],A+=1,Y.children!==void 0)V.push(k(Y,A,z,Q));else V.push(B(Y,A,J,Q));X.push(Y),K=-1}return L},e=function(_){if(_.length===0||_[0].children===void 0||_[0].children.length===0)$("The bookmark roots does not exist");var A=_[0].children,L=j.templateButtons.content.children,z=L[0],J=L[1],Q=L[4],V=A[0],X=k(V,1,j.templateDir,void 0),K=X.firstElementChild.children[1],Y=Q.cloneNode(!0);if(X.setAttribute("open","true"),Y.classList.add("c_center-children"),K.appendChild(z.cloneNode(!0)),K.appendChild(J.cloneNode(!0)),K.appendChild(Y),V.children!==void 0&&V.children.length>0)m(V,1,X,j.templateDir,j.templateItem,j.templateButtons);if(j.fragment.appendChild(X),V=A[1],X=k(V,1,j.templateDir,void 0),K=X.firstElementChild.children[1],Y=Q.cloneNode(!0),Y.classList.add("c_center-children"),K.appendChild(z.cloneNode(!0)),K.appendChild(J.cloneNode(!0)),K.appendChild(Y),V.children!==void 0&&V.children.length>0)m(V,1,X,j.templateDir,j.templateItem,j.templateButtons);j.fragment.appendChild(X),j.main.appendChild(j.fragment)},t=function(_){var A=_.target,L=A.getAttribute("data-button");if(L===null)$("ButtonType is null");if(L==="0")H.url="chrome://bookmarks/",H.active=!0,chrome.tabs.create(H,void 0);else if(L==="1")j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","0");else if(L==="2")window.close()};async function __(_,A){var L=A,z=[A],J=[],Q=[],V=[],X=_;G.url=X.url,G.index=X.index,G.title=X.title,G.parentId=X.parentId;var K=await chrome.bookmarks.create(G,void 0);if(A.setAttribute("data-id",K.id),X.children.length>0)J.push(K.id),Array.prototype.push.apply(V,X.children);while(V.length>0){if(X=V.shift(),X.index===void 0)$("BookmarkTreeNode.index is undefined");var Y=X.children!==void 0;if(!Y&&Q.length>0&&Q[0]===X.id)z.shift(),Q.shift(),J.shift();G.url=X.url,G.index=X.index,G.title=X.title,G.parentId=J[0];var K=await chrome.bookmarks.create(G,void 0);if(A=z[0].children[X.index+1],A.setAttribute("data-id",K.id),Y&&X.children.length>0)z.push(A),J.push(K.id),Q.push(X.children[0].id),Array.prototype.push.apply(V,X.children)}j.messageUndo.setAttribute("data-display","0"),L.setAttribute("data-display","1"),w()}var A_=function(_){if(_===void 0)return;x.target.setAttribute("data-id",_.id),x.target.setAttribute("data-display","1"),j.messageUndo.setAttribute("data-display","0"),w()},L_=function(_){var A=_.target,L=A.getAttribute("data-button");if(L==="1")clearTimeout(x.timeout),x.target.remove(),j.messageUndo.setAttribute("data-display","0"),w();else if(L==="0"){if(x.timeout===void 0){console.warn("The undo action cannot be completed. The element was deleted"),w();return}if(clearTimeout(x.timeout),x.target===null)$("DeleteState.target is null");var z=x.BTNode;if(z===null)$("DelteState.BTNode is null");if(z.children===void 0)G.parentId=z.parentId,G.url=z.url,G.index=z.index,G.title=z.title,chrome.bookmarks.create(G,A_);else __(z,x.target)}},j_=function(_){_.remove(),j.messageUndo.setAttribute("data-display","0"),w()},S=function(_){if(_.length===0){if(x.target!==null)x.target.remove();w();return}var A=_[0];x.BTNode=A,j.messageUndo.setAttribute("data-display","1");var L=j.messageUndo.children;if(L[0].textContent=A.title,L[1].textContent="removed",A.url===void 0)chrome.bookmarks.removeTree(A.id,void 0);else chrome.bookmarks.remove(A.id,void 0);x.timeout=setTimeout(j_,2000,x.target)},z_=function(_){if(x.timeout!==void 0)clearTimeout(x.timeout),x.target.remove();var A=_.parentElement,L=A.getAttribute("data-parent"),z="";if(L==="0"){var J=A.parentElement.parentElement;J.setAttribute("data-display","0"),z=J.getAttribute("data-id"),x.target=J,chrome.bookmarks.getSubTree(z,S)}else{var Q=A.parentElement;Q.setAttribute("data-display","0"),z=Q.getAttribute("data-id"),x.target=Q,chrome.bookmarks.get(z,S)}},J_=function(_){var A=j.modalForm;if(_.length===0)$("What the fuck, data is empty");var L=_[0];if(L.title!==void 0)A[0].value=L.title;if(L.url!==void 0)A[1].value=L.url;j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","1"),A[0].focus()},Q_=function(_){var A=j.modal.children[1],L=_.parentElement,z=L.getAttribute("data-parent"),J="";if(Z.formType="0",z==="0"){A.firstElementChild.firstElementChild.textContent="Edit folder";let Q=L.parentElement.parentElement;Z.target=Q;let V=Q.getAttribute("data-id");if(V!==null)J=V}else{A.firstElementChild.firstElementChild.textContent="Edit bookmark";let Q=L.parentElement;Z.target=Q;let V=Q.getAttribute("data-id");if(V!==null)J=V}if(J.length===0)$("id is empty");Z.id=J,Z.type=z,A.setAttribute("data-edit",z),chrome.bookmarks.get(J,J_)},u=function(_,A,L){var z=_.parentElement.parentElement.parentElement,J=j.modalForm,Q=z.getAttribute("data-id");if(Q===null)$("id is null");Z.parentId=Q,Z.formType="1",Z.target=z,Z.depth=Number(z.getAttribute("data-depth"));var V=j.modal.children[1];if(V.setAttribute("data-edit",A),A==="0")V.firstElementChild.firstElementChild.textContent="CreateOptions folder";else{if(!L)J[0].value=I.title,J[1].value=I.url;V.firstElementChild.firstElementChild.textContent="CreateOptions bookmark"}j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","1"),J[0].focus()};async function V_(_){if(D(_),P.target===null)$("SortState.target is null");const A=P.target.children,L=[A[0]];for(let J=0;J<_.length;J+=1){var z=_[J];N.index=J,N.parentId=P.parentId,await chrome.bookmarks.move(z.id,N),L.push(A[z.index+1])}Element.prototype.replaceChildren.apply(P.target,L),P.target=null,P.parentId=""}var X_=function(_){let A=_.getAttribute("data-id");if(A===null)$("data-id is null");P.target=_,P.parentId=A,chrome.bookmarks.getChildren(A,V_)},Y_=function(_){if(_===void 0||_.length===0)return;H.active=!1;for(let L=0;L<_.length;L+=1){var A=_[L];if(A.url!==void 0)H.url=A.url,chrome.tabs.create(H)}},p=function(_){if(_===void 0||_.length===0)return;b.url.length=0;for(let L=0;L<_.length;L+=1){var A=_[L];if(A.url!==void 0)b.url.push(A.url)}chrome.windows.create(b)},Z_=function(_){var A=_.target;const L=A.getAttribute("data-type");if(L==="10")_.preventDefault(),z_(A);else if(L==="9"){_.preventDefault();let J=A.parentElement.parentElement.parentElement;X_(J)}else if(L==="11"){_.preventDefault();let Q=A.parentElement.parentElement.parentElement.getAttribute("data-id");chrome.bookmarks.getChildren(Q,Y_)}else if(L==="12"){_.preventDefault();let Q=A.parentElement.parentElement.parentElement.getAttribute("data-id");b.incognito=!1,chrome.bookmarks.getChildren(Q,p)}else if(L==="13"){_.preventDefault();let Q=A.parentElement.parentElement.parentElement.getAttribute("data-id");b.incognito=!0,chrome.bookmarks.getChildren(Q,p)}else if(L==="7")_.preventDefault(),Q_(A);else if(L==="6")_.preventDefault(),u(A,"0",!1);else if(L==="5")_.preventDefault(),u(A,"2",_.ctrlKey);else if(L==="3"){if(!_.shiftKey){_.preventDefault();var z=A.getAttribute("href");r(z,_.ctrlKey)}}},$_=function(_){var A=_.target,L=A.getAttribute("data-type");if(L==="8"){var z=A.parentElement.parentElement.parentElement,J=A.parentElement.nextElementSibling,Q=j.main.offsetHeight+j.main.scrollTop-(J.offsetHeight+A.parentElement.parentElement.offsetHeight);if(Q<z.offsetTop)J.style.setProperty("top","unset"),J.style.setProperty("bottom","30px");else J.style.setProperty("top","30px"),J.style.setProperty("bottom","unset")}},G_=function(_){var A=_.target,L=A.getAttribute("data-type");if(L=="4"||L==="10"){var z=j.modal.getAttribute("data-show");if(z==="1"){if(Z.formType==="1")T();h();var J=j.modal.children[1];J.setAttribute("data-edit","");var Q=j.modalForm;Q[0].value="",Q[1].value="",j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")}j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")}},K_=function(_){if(_===void 0)return;if(Z.target===null)$("ModalState.target is null");if(_.url===void 0)O(Z.target,_.title);else M(Z.target,_.title,_.url);h()};var x_=function(_){if(_===void 0)return;if(Z.target===null)$("ModalState.target is null");var A;if(v.id=_.id,v.title=_.title,_.url===void 0)A=k(v,Z.depth+1,j.templateDir,j.templateButtons);else v.url=_.url,A=B(v,Z.depth+1,j.templateItem,j.templateButtons);Z.target.appendChild(A),T(),h()},U_=function(_){_.preventDefault();var A=j.modalForm,L=j.modal?.children[1],z=A[0].value;if(Z.formType==="0"){if(F.title=z,Z.type==="0")F.url="";else{var J=A[1].value;F.url=J}chrome.bookmarks.update(Z.id,F,K_)}else{if(G.parentId=Z.parentId,G.title=z,Z.type==="0")G.url=void 0;else{var J=A[1].value;G.url=J}chrome.bookmarks.create(G,x_)}L.setAttribute("data-edit",""),A[0].value="",A[1].value="",j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")},H_=function(_){var A=_.currentTarget;U.open=A.value,chrome.storage.local.set(U,void 0)},P_=function(_){var A=_.currentTarget;U.focusTabs=A.checked,chrome.storage.local.set(U,void 0)},W_=function(_){var A=_.currentTarget;U.foldersBefore=A.checked,chrome.storage.local.set(U,void 0)},w_=function(_){I=_[0],j.headerButtons.onclick=t,j.messageUndo.lastElementChild.onclick=L_,j.main.onclick=Z_,j.main.onpointerover=$_,j.modalConfigOpen.onchange=H_,j.modalConfigFocus.onchange=P_,j.modalConfigFolders.onchange=W_,j.modal.onclick=G_,j.modalForm.onsubmit=U_,chrome.bookmarks.getTree(e)},q_=function(){if(j.templateDir=document.getElementById("template_dir"),j.templateDir===null)$("DOM.templateDir is null");if(j.templateItem=document.getElementById("template_item"),j.templateItem===null)$("DOM.templateItem is null");if(j.templateButtons=document.getElementById("template_buttons"),j.templateButtons===null)$("DOM.templateButtons is null");if(j.headerButtons=document.getElementById("header_buttons"),j.headerButtons===null)$("DOM.headerButtons is null");if(j.messageUndo=document.getElementById("message_undo"),j.messageUndo===null)$("DOM.messageUndo is null");if(j.main=document.getElementById("main"),j.main===null)$("DOM.main is null");if(j.modal=document.getElementById("modal"),j.modal===null)$("DOM.modal is null");if(j.modalForm=document.getElementById("modal_form"),j.modalForm===null)$("DOM.modalForm is null");if(j.modalConfigOpen=document.getElementById("modal_config-open"),j.modalConfigOpen===null)$("DOM.modalConfigOpen is null");if(j.modalConfigFocus=document.getElementById("modal_config-focus"),j.modalConfigFocus===null)$("DOM.modalConfigFocus is null");if(j.modalConfigFolders=document.getElementById("modal_config-folders"),j.modalConfigFolders===null)$("DOM.modalConfigFolders is null");chrome.storage.local.get(void 0,i),chrome.tabs.query({active:!0,currentWindow:!0},w_)};var j={templateDir:null,templateItem:null,templateButtons:null,headerButtons:null,messageUndo:null,main:null,modal:null,modalConfigOpen:null,modalConfigFocus:null,modalConfigFolders:null,modalForm:null,fragment:document.createDocumentFragment()},U={focusTabs:!1,foldersBefore:!0,open:"0"},Z={id:"",target:null,type:"",depth:0,parentId:"",formType:""},F={title:"",url:""},G={index:void 0,parentId:void 0,title:"",url:void 0},x={BTNode:null,target:null,timeout:void 0},P={target:null,parentId:""},N={index:0,parentId:""},I=void 0,$=function(_){throw Error(_)},H={active:!1,url:""},r=function(_,A){if(H.url=_,H.active=U.focusTabs,U.open==="0"===!A)chrome.tabs.update(I.id,H,void 0);else chrome.tabs.create(H,void 0)},f=new URL("http://t.i"),o=function(_){return f.href=chrome.runtime.getURL("/_favicon/"),f.searchParams.set("pageUrl",_),f.searchParams.set("size","16"),f.toString()},k=function(_,A,L,z){var J=L.content.cloneNode(!0),Q=J.firstElementChild;Q.setAttribute("data-id",_.id),Q.setAttribute("data-depth",String(A)),Q.setAttribute("title",_.title);var V=Q.firstElementChild,X=V.firstElementChild;X.style.setProperty("padding-left",`${A*10}px`);var K=X.lastElementChild;if(K.textContent=_.title,z!==void 0){var Y=z.content.cloneNode(!0).children,W=Y[0],R=Y[1],y=Y[2],s=Y[3],C=Y[4],c=Y[5],n=Y[6],l=Y[7],d=Y[8],E=V.children[1],q=V.children[2];E.appendChild(W),E.appendChild(R),E.appendChild(y),E.appendChild(s),C.insertAdjacentText("beforeend","Sort A-Z"),c.insertAdjacentText("beforeend","Remove folder"),q.appendChild(n),q.appendChild(l),q.appendChild(d),q.appendChild(C),q.appendChild(c)}return Q},b={incognito:!1,url:[],setSelfAsOpener:!1},v={id:"",title:"",url:""};window.addEventListener("DOMContentLoaded",q_);
