var s=function(j){const{open:x,theme:G,focusTabs:z,beginning:J,foldersBefore:Q,showNumber:Y}=j;let W=!1;if(x==="n"||x==="c")_.open=x;else W=!0;if(Y!==void 0)_.showNumber=Y;else W=!0;if(G==="d"||G==="l")_.theme=G;else W=!0;if(z!==void 0)_.focusTabs=z;else W=!0;if(J!==void 0)_.beginning=J;else W=!0;if(Q!==void 0)_.foldersBefore=Q;else W=!0;if(W)chrome.storage.local.set(_,void 0)},E=function(){A?.focus(),A=null},l=function(j,x,G,z){var J=j[z];j[z]=j[G],j[G]=J;let Q=0;for(let Y=x;Y<G;Y+=1)if(String.prototype.localeCompare.call(j[Y].btnTitle,j[G].btnTitle)<0)J=j[Q+x],j[Q+x]=j[Y],j[Y]=J,Q+=1;return J=j[Q+x],j[Q+x]=j[G],j[G]=J,Q+x},h=function(j,x,G){if(G-x<1)return j;let z=[x,G],J=0,Q=0;while(z.length>0){if(x=z.shift(),G=z.shift(),J=Math.floor(Math.random()*(G-x)+x),Q=l(j,x,G,J),Q-1-x>0)z.push(x,Q-1);if(G-(Q+1)>0)z.push(Q+1,G)}return j},c=function(j,x,G){if(x==="n"===G)chrome.tabs.update(void 0,j,void 0);else chrome.tabs.create(j,void 0)},v=function(j){$.MAIN.inert=!1,R.NAV.inert=!1,j?.removeAttribute("data-open"),E()},B=function(j){if(j.target.getAttribute("data-action")==="close")v(j.currentTarget)},n=function(j){let x=chrome.runtime.getURL("/_favicon/");return x+="?pageUrl="+j+"&size=16",x},o=function(j,x,G){const z=[G],J=[j];let Q=-1,Y=j,W=G;while(J.length>0)if(Y=J[J.length-1],Y.children===void 0||Q+1===Y.children.length){if(J.pop(),Y.index===void 0)throw Error("BookmarkTreeNode does not have index");if(Q=Y.index,W=z.pop(),z.length>0)z[z.length-1].appendChild(W);x-=1}else{if(Y=Y.children[Q+1],x+=1,Y.children!==void 0)z.push(U.create(Y,x));else{let F=L.create(Y,x);if(F!==void 0)z.push(F)}J.push(Y),Q=-1}return G},i=function(j){const x=document.createDocumentFragment();for(let G of j.children){let z=U.createRoot(G);o(G,1,z),x.appendChild(z)}if(x.children.length>0)x.children[0].setAttribute("open","");$.MAIN.appendChild(x)},M=function(j){if(q.MODAL.hasAttribute("data-open")){if(j.code==="KeyQ"||j.code==="KeyM")v(q.MODAL)}else if(k.MODAL.hasAttribute("data-open")){if(j.code==="KeyQ"||j.code==="KeyK")v(k.MODAL)}else if(Z.MODAL.hasAttribute("data-open")){if(j.ctrlKey&&j.code==="KeyQ")v(Z.MODAL)}else if(X.MODAL.hasAttribute("data-open")){if(j.ctrlKey&&j.code==="KeyQ")v(X.MODAL)}else if(j.code==="KeyK")k.open();else if(j.code==="KeyM")q.open();else if(j.code==="KeyU")V.undo()};var P={title:"",url:""},H={parentId:"",title:"",index:void 0},K={parentId:"",title:"",url:"",index:void 0},y={index:0,parentId:""},N={active:!1,url:""},C={incognito:!1,url:[],setSelfAsOpener:!1,focused:!1,type:"normal"},w=[],T,_={focusTabs:!1,foldersBefore:!1,beginning:!1,showNumber:!0,open:"c",theme:"d"},f=document.getElementById("template_buttons");if(f===null)throw Error("#template_buttons does not exist");var A=null,U={TYPE:"dir",template:function(){let j=document.getElementById("template_dir");if(j===null)throw Error("#template_dir does not exist");return j.content}(),create(j,x){let G=j?.children?.length??0;const z=U.template.firstElementChild?.cloneNode(!0);z.depth=x,z.noopen=!1,z.noremove=!1,z.noedit=!1,z.btnTitle=j.title,z.btnId=j.id,z.btnIndex=j.index,z.btnChildren=G,z.btnType=U.TYPE,z.changeTitle=U.prototype.changeTitle,z.changeNumber=U.prototype.changeNumber;const J=z.firstElementChild;J.btnType=U.TYPE,J.setAttribute("title",`${j.title} - ${G}`),J.style.setProperty("padding-left",`${x*10}px`);const Q=J.children.content;Q.btnType=U.TYPE,Q.children.number.insertAdjacentText("beforeend",String(G)),Q.children.title.insertAdjacentText("beforeend",j.title);const Y=f.content.cloneNode(!0);let W=Y.children.bookmark,F=Y.children.folder,S=Y.children.edit,g=Y.children.more,u=Y.children.sort,p=Y.children.remove,O=Y.children.openall,m=Y.children.openall_window,d=Y.children.openall_incognito;S.setAttribute("title","rename"),u.insertAdjacentText("beforeend","sort by name"),p.insertAdjacentText("beforeend","remove folder");let b=J.children.buttons;b.btnType=U.TYPE;let I=J.children.buttons_more;return I.btnType=U.TYPE,b.append(W,F,S,g),I.append(O,m,d,u,p),z},createRoot(j){let x=j?.children?.length;const G=U.template.firstElementChild?.cloneNode(!0);G.depth=1,G.noopen=!0,G.noremove=!0,G.noedit=!0,G.btnId=j.id,G.btnTitle=j.title,G.btnIndex=j.index,G.btnChildren=x,G.btnType=U.TYPE,G.changeTitle=null,G.changeNumber=U.prototype.changeNumber;const z=G.firstElementChild;z.btnType=U.TYPE,z.setAttribute("title",`${j.title} - ${x}`),z.style.setProperty("padding-left","10px");const J=z.children.content;J.btnType=U.TYPE,J.children.number.insertAdjacentText("beforeend",String(x)),J.children.title.insertAdjacentText("beforeend",j.title);const Q=f.content.cloneNode(!0);let Y=Q.children.bookmark,W=Q.children.folder,F=Q.children.sort,S=z.children.buttons;return S.btnType=U.TYPE,S.append(Y,W,F),G},edit(j){const x=Z.target;Z.target=void 0,x.changeTitle(j.title),v(Z.MODAL)},pushDir(j){if(Z.target===void 0){console.error("ERROR: DirModal.target is undefined");return}let x=Z.target;Z.target=void 0;let G=U.create(j,x.depth+1);if(x.changeNumber(x.btnChildren+1),_.beginning||_.foldersBefore){H.index=void 0;let z=j.index+1;while(z<x.childElementCount){let Q=x.children[z];Q.btnIndex+=1,z+=1}const J=x.children[j.index];x.insertBefore(G,J.nextElementSibling)}else x.appendChild(G);v(Z.MODAL)},pushItem(j){if(X.target===void 0){console.error("ERROR: ItemModal.target is undefined");return}let x=X.target;X.target=void 0;let G=L.create(j,x.depth+1);if(x.changeNumber(x.btnChildren+1),_.beginning||_.foldersBefore){K.index=void 0;let z=j.index+1;while(z<x.childElementCount){let Q=x.children[z];Q.btnIndex+=1,z+=1}const J=x.children[j.index];x.insertBefore(G,J.nextElementSibling)}else x.appendChild(G);v(X.MODAL)},openItems(j){for(let x of j.children){if(x.btnType!==L.TYPE)continue;N.url=x.btnUrl,chrome.tabs.create(N)}},openItemsOnWindow(j,x){C.url.length=0,C.incognito=x;for(let G of j.children){if(G.btnType!==L.TYPE)continue;C.url.push(G.btnUrl)}chrome.windows.create(C)},sort(j){if(j.children.length<2)return;let x=j.children;if(w.length=x.length,w[0]=j.children[0],_.foldersBefore){let z=1,J=1;while(J<x.length){let Q=x[J];if(Q.btnType===U.TYPE){if(z!==J){let Y=w[z];w[z]=Q,w[J]=Y}else w[J]=Q;z+=1}else w[J]=Q;J+=1}h(w,1,z-1),h(w,z,J-1)}else{for(let z=1;z<x.length;z+=1)w[z]=x[z];h(w,1,w.length-1)}let G=j.btnId;for(let z=1;z<w.length;z+=1){let J=w[z];J.btnIndex=z-1,y.index=z-1,y.parentId=G,chrome.bookmarks.move(J.btnId,y)}Element.prototype.replaceChildren.apply(j,w)},prototype:{changeTitle(j){this.btnTitle=j;const x=this.firstElementChild,G=x.children.content;x.setAttribute("title",`${j} - ${this.btnChildren}`),G.children.title.textContent=j},changeNumber(j){this.btnChildren=j;const x=this.firstElementChild,G=x.children.content;x.setAttribute("title",`${this.btnTitle} - ${j}`),G.children.number.textContent=j}}},L={TYPE:"item",template:function(){let j=document.getElementById("template_item");if(j===null)throw Error("#template_item does not exist");return j.content}(),create(j,x){if(j.url===void 0){console.error("ERROR: try create a DOMItem with a dir BookmarkTreeNode");return}const G=L.template.firstElementChild.cloneNode(!0);G.depth=x,G.btnId=j.id,G.btnTitle=j.title,G.btnUrl=j.url,G.btnIndex=j.index,G.btnType=L.TYPE,G.edit=L.prototype.edit;const z=G.children.content;z.btnType=L.TYPE,z.setAttribute("href",j.url),z.setAttribute("title",`${j.title}\n${j.url}`),z.style.setProperty("padding-left",`${x*10}px`);const J=z.firstElementChild;J.children.img.setAttribute("src",n(j.url)),J.children.title.textContent=j.title;const Q=f.content.children,Y=Q.edit.cloneNode(!0),W=Q.remove.cloneNode(!0);return Y.setAttribute("title","edit"),G.children.buttons.btnType=L.TYPE,G.children.buttons.append(Y,W),G},edit(j){X.target.edit(j.title,j.url),v(X.MODAL)},prototype:{edit(j,x){this.btnTitle=j,this.btnUrl=x;const G=this.children.content;G.setAttribute("href",x),G.setAttribute("title",`${j}\n${x}`),G.firstElementChild.children.title.textContent=j}}},Z={action:"e",id:"",parentId:"",prevTitle:"",target:void 0,MODAL:function(){let j=document.getElementById("modal_dir");if(j===null)throw Error("#modal_dir does not exist");return j}(),FORM:function(){let j=document.forms.dir;if(j===void 0)throw Error("form.dir does not exist");return j}(),openCreate(j){if(j.btnId===void 0||j.depth===void 0){console.error("ERROR: id or depth property does not exist");return}Z.action="c",Z.parentId=j.btnId,Z.target=j,Z.depth=j.depth,$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,Z.MODAL?.setAttribute("data-open",""),Z.MODAL?.setAttribute("data-modal","create"),Z.FORM.reset(),Z.FORM.title.focus()},openEdit(j){if(j.btnId==null||j.depth==null){console.error("ERROR: id or depth property does not exist");return}Z.action="e",Z.id=j.btnId,Z.target=j,Z.depth=j.depth,Z.prevTitle=j.btnTitle,$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,Z.MODAL?.setAttribute("data-open",""),Z.MODAL?.setAttribute("data-modal","edit"),Z.MODAL.title=j.btnTitle,Z.FORM.title.value=j.btnTitle,Z.FORM.title.focus()},onsubmit(j){j.preventDefault();let x=Z.FORM.title.value;if(x===void 0||x.length<1)return;if(Z.action==="e"){if(x===Z.prevTitle)return;P.title=x,chrome.bookmarks.update(Z.id,P,U.edit)}else if(Z.action==="c"){if(_.beginning)H.index=0;else if(_.foldersBefore){let G=Z.target,z=1;while(z<G.childElementCount&&G.children[z].btnType===U.TYPE)z+=1;H.index=z-1}H.parentId=Z.parentId,H.title=x,chrome.bookmarks.create(H,U.pushDir)}}},X={action:"e",id:"",parentId:"",prevTitle:"",prevUrl:"",target:void 0,MODAL:function(){let j=document.getElementById("modal_item");if(j===null)throw Error("#modal_item does not exist");return j}(),FORM:function(){let j=document.forms.items;if(j===void 0)throw Error("form.items does not exist");return j}(),openCreate(j,x){if(j.btnId==null||j.depth==null){console.error("ERROR: id or depth property does not exist");return}if(X.action="c",X.parentId=j.btnId,X.target=j,X.id="",!x)X.FORM.title.value=T.title,X.FORM.url.value=T.url;else X.FORM.reset();$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,X.MODAL?.setAttribute("data-open",""),X.MODAL?.setAttribute("data-modal","create"),X.FORM.title.focus()},openEdit(j){if(j.btnId==null||j.depth==null){console.error("ERROR: id or depth property does not exist");return}X.action="e",X.id=j.btnId,X.target=j,X.parentId="",X.prevTitle=j.btnTitle,X.prevUrl=j.btnUrl,$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,X.MODAL?.setAttribute("data-open",""),X.MODAL?.setAttribute("data-ItemModal","edit"),X.FORM.title.value=j.btnTitle,X.FORM.url.value=j.btnUrl,X.FORM.title.focus()},onsubmit(j){j.preventDefault();let x=X.FORM.title.value,G=X.FORM.url.value;if(x===void 0||x.length<1||G===void 0||G.length<1)return;if(X.action==="e"){if(x===X.prevTitle&&G===X.prevUrl)return;P.title=x,P.url=G,chrome.bookmarks.update(X.id,P,L.edit)}else if(X.action==="c"){if(_.beginning)if(_.foldersBefore){let z=X.target,J=1;while(J<z.childElementCount&&z.children[J].btnType===U.TYPE)J+=1;K.index=J-1}else K.index=0;K.title=x,K.url=G,K.parentId=X.parentId,chrome.bookmarks.create(K,U.pushItem)}}},q={MODAL:function(){let j=document.getElementById("modal_more");if(j===null)throw Error("#modal_more does not exist");return j}(),FORM:function(){let j=document.forms.more;if(j===void 0)throw Error("form.more does not exist");return j}(),init(j){q.FORM.theme.value=j.theme,q.FORM.number.checked=j.showNumber,q.FORM.open.value=j.open,q.FORM.focus.checked=j.focusTabs,q.FORM.beginning.checked=j.beginning,q.FORM.folders.checked=j.foldersBefore},open(){if(A===null)if(document.activeElement===null||document.activeElement===document.body)A=R.NAV.children.more;else A=document.activeElement;$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,q.MODAL?.setAttribute("data-open",""),q.FORM.theme.focus()},onchange(j){const x=j.target;let G=x.getAttribute("name"),z=!1;if(G==="theme")if(x.value==="d"||x.value==="l")_.theme=x.value,document.firstElementChild?.setAttribute("class",x.value),z=!0;else{if(x.value="d",document.firstElementChild.setAttribute("class","d"),_.theme!=="d")_.theme="d",z=!0;console.error("WARNNING: the theme value was wrong, it will set the default")}else if(G==="number"){if(_.showNumber=x.checked,x.checked)$.MAIN?.removeAttribute("css-nonumber");else $.MAIN?.setAttribute("css-nonumber","");z=!0}else if(G==="open")if(x.value==="n"||x.value==="c")_.open=x.value,z=!0;else{if(x.value="c",_.open!=="c")_.open="c",z=!0;console.error("WARNNING: the open value was wrong, it will set the default")}else if(G==="focus")_.focusTabs=x.checked,N.active=_.focusTabs,C.focused=_.focusTabs,z=!0;else if(G==="beginning")_.beginning=x.checked,z=!0;else if(G==="folders")_.foldersBefore=x.checked,z=!0;if(z)chrome.storage.local.set(_,void 0)}},k={MODAL:function(){let j=document.getElementById("modal_keyboard");if(j===null)throw Error("#modal_keyboard does not exist");return j}(),open(){if(A===null)if(document.activeElement===null||document.activeElement===document.body)A=R.NAV.children.keyboard;else A=document.activeElement;$.MAIN.inert=!0,R.NAV.inert=!0,V.infocus=!1,k.MODAL?.setAttribute("data-open",""),k.MODAL.firstElementChild.firstElementChild.lastElementChild.focus()}},V={MESSAGE:function(){const j=document.getElementById("message");if(j===null)throw Error("#message does not exist");return j}(),infocus:!1,type:"",target:null,parentTarget:null,timeout:void 0,clear(){V.target=null,V.parentTarget=null,V.timeout=void 0,V.infocus=!1},open(j){V.MESSAGE.setAttribute("data-show","");const x=V.MESSAGE.firstElementChild?.lastElementChild,G=V.MESSAGE.lastElementChild?.lastElementChild;x.textContent=j,V.infocus=!0,G.focus()},remove(j,x){if(V.timeout!==void 0)clearTimeout(V.timeout);const G=x.parentElement;if(V.type=j,V.target=x,V.parentTarget=G,V.timeout=setTimeout(V.close,4000),x.btnId!==void 0){let z=x.btnIndex+2;while(z<G.childElementCount)G.children[z].btnIndex-=1,z+=1;G?.changeNumber(G.btnChildren-1),G.removeChild(x),chrome.bookmarks.removeTree(x.btnId,void 0),V.open(x.btnTitle)}else console.error("ERROR: btnId property does not exist")},async undoBtnDir(j,x){const G=[j];let z=1,J=!1;H.index=j.btnIndex;while(G.length>0){let Q=G[G.length-1];if(!J){H.title=Q.btnTitle,H.parentId=x;let W=await chrome.bookmarks.create(H);Q.btnId=W.id,H.index=void 0,z=1}let Y=Q.children.length;if(1<Y){x=Q.btnId;let W=Q.children[z];while(z<Y&&W.btnType===L.TYPE){W=Q.children[z],K.title=W.btnTitle,K.url=W.btnUrl,K.parentId=x;let F=await chrome.bookmarks.create(K);W.btnId=F.id,z+=1}}if(1<Y&&z<Y)G.push(Q.children[z]),J=!1;else G.pop(),z=Q.btnIndex+2,J=!0}},async undoBtnItem(j,x){K.title=j.btnTitle,K.url=j.btnUrl,K.parentId=x,K.index=j.btnIndex;let G=await chrome.bookmarks.create(K);j.btnId=G.id,K.index=void 0},undo(){const{target:j,parentTarget:x}=V;if(j===null||x===null)return;if(V.timeout!==void 0)clearTimeout(V.timeout);if(V.type===U.TYPE)V.undoBtnDir(j,x.btnId);else V.undoBtnItem(j,x.btnId);let G=j.btnIndex+1;while(G<x.childElementCount)x.children[G].btnIndex+=1,G+=1;const z=x.children[j.btnIndex];if(x.changeNumber(x.btnChildren+1),x.insertBefore(j,z.nextSibling),V.infocus)A=j.firstElementChild;V.close()},close(){if(V.MESSAGE.removeAttribute("data-show"),V.infocus)E();V.clear()},onclick(j){let G=j.target.getAttribute("name");if(G==="close")V.close();else if(G==="undo")V.undo()},onkeydown(j){if(j.code==="Tab"){if(j.shiftKey&&j.target.getAttribute("name")==="undo"||j.target.getAttribute("name")==="close")V.infocus=!1,E()}else if(j.code==="KeyQ")V.close()}},R={NAV:function(){const j=document.getElementById("header_nav");if(j===null)throw Error("#header_nav does not exist");return j}(),onclick(j){let G=j.target.getAttribute("name");if(G==="bookmarks")N.url="about://bookmarks",c(N,_.open,j.ctrlKey);else if(G==="more")q.open();else if(G==="keyboard")k.open();else if(G==="close")window.close()},onauxclick(j){if(j.target?.getAttribute("name")==="bookmarks")N.url="about://bookmarks",chrome.tabs.create(N,void 0)}},$={MAIN:function(){const j=document.getElementById("main");if(j===null)throw Error("#main does not exist");return j}(),onauxclick(j){const x=j.target;if(x?.getAttribute("name")!=="content"&&x.btnType!==L.TYPE)return;j.preventDefault();const z=x?.getAttribute("href");N.url=z,chrome.tabs.create(N,void 0)},onclick(j){const x=j.target,G=x?.getAttribute("name");if(G==="content"){if(x.btnType===L.TYPE){if(!j.shiftKey){j.preventDefault();const z=x?.getAttribute("href");N.url=z,c(N,_.open,j.ctrlKey)}}else if(x.btnType===U.TYPE){const z=x.parentElement,J=x.parentElement.parentElement;if(J.hasAttribute("open")){let Q=J.offsetTop-$.MAIN.offsetTop-z.clientHeight;if($.MAIN.scrollTop>Q)$.MAIN.scroll(0,Q)}}}else if(G==="bookmark"){const z=x?.parentElement?.parentElement?.parentElement;A=z.firstElementChild,X.openCreate(z,j.shiftKey)}else if(G==="folder"){const z=x?.parentElement?.parentElement?.parentElement;A=z.firstElementChild,Z.openCreate(z)}else if(G==="edit"){let z=x.parentElement.btnType;if(z===U.TYPE){const J=x?.parentElement?.parentElement?.parentElement;if(J.noedit)return;A=J.firstElementChild,Z.openEdit(J)}else if(z===L.TYPE){const J=x?.parentElement?.parentElement;A=x?.parentElement,X.openEdit(J)}}else if(G==="remove"){let z=x.parentElement.btnType;if(z===U.TYPE){const J=x?.parentElement?.parentElement?.parentElement;if(J.noremove)return;if(J.nextElementSibling===null)A=J?.parentElement?.nextElementSibling?.firstElementChild;else A=J.nextElementSibling.firstElementChild;V.remove(z,J)}else if(z===L.TYPE){const J=x?.parentElement?.parentElement;if(J.nextElementSibling===null)A=J.parentElement.nextElementSibling?.firstElementChild;else A=J.nextElementSibling.firstElementChild;V.remove(z,J)}}else if(G==="sort"){const z=x?.parentElement?.parentElement?.parentElement;U.sort(z)}else if(G==="openall"){const z=x?.parentElement?.parentElement?.parentElement;if(z.noopen)return;U.openItems(z)}else if(G==="openall_window"){const z=x?.parentElement?.parentElement?.parentElement;if(z.noopen)return;U.openItemsOnWindow(z,!1)}else if(G==="openall_incognito"){const z=x?.parentElement?.parentElement?.parentElement;if(z.noopen)return;U.openItemsOnWindow(z,!0)}},onkeyup(j){let x=j.target,G=x?.btnType;if(G===void 0)return;if(j.code==="KeyB"||j.code==="KeyV"){if(j.ctrlKey)return;let z;if(j.shiftKey){if(G===U.TYPE)z=x.parentElement.parentElement;else if(G===L.TYPE)z=x.parentElement.parentElement.parentElement}else if(G===U.TYPE)z=x.parentElement;else if(G===L.TYPE)z=x.parentElement.parentElement;if(z!==void 0&&z.btnType===U.TYPE)A=x,X.openCreate(z,j.code==="KeyV")}else if(j.code==="Space"){if(G===U.TYPE){const z=x,J=x.parentElement;if(J.hasAttribute("open")){let Q=J.offsetTop-$.MAIN.offsetTop-z.clientHeight;if($.MAIN.scrollTop>Q)$.MAIN.scroll(0,Q)}}}else if(j.code==="KeyF"){if(j.ctrlKey)return;let z;if(j.shiftKey){if(G===U.TYPE)z=x.parentElement.parentElement;else if(G===L.TYPE)z=x.parentElement.parentElement.parentElement}else if(G===U.TYPE)z=x.parentElement;else if(G===L.TYPE)z=x.parentElement.parentElement;if(z!==void 0&&z.btnType===U.TYPE)A=x,Z.openCreate(z)}else if(j.code==="KeyE"){if(j.ctrlKey||j.shiftKey)return;if(G===U.TYPE){const z=x.parentElement;if(z.noedit);Z.openEdit(z)}else if(G===L.TYPE){const z=x?.parentElement;A=x,X.openEdit(z)}}else if(j.code==="KeyR"){if(j.ctrlKey||j.shiftKey)return;let z;if(G===U.TYPE){if(z=x.parentElement,z.nextElementSibling===null)A=z?.parentElement?.nextElementSibling?.firstElementChild;else A=z.nextElementSibling.firstElementChild;if(z!==void 0){if(z.noremove)return;V.remove(G,z)}}else if(G===L.TYPE){const J=x?.parentElement;if(z=J?.parentElement,J.nextElementSibling===null)A=z?.nextElementSibling?.firstElementChild;else A=J.nextElementSibling.firstElementChild;V.remove(G,J)}}else if(j.code==="KeyS"){if(j.ctrlKey)return;let z;if(j.shiftKey&&G===U.TYPE)z=x.parentElement.parentElement;else if(G===U.TYPE)z=x.parentElement;else if(G===L.TYPE)z=x.parentElement.parentElement;if(z!==void 0)U.sort(z),x.focus()}else if(j.code==="KeyO"){if(j.ctrlKey)return;if(G===U.TYPE){const z=x.parentElement;if(z!==void 0){if(z.noopen)return;if(j.shiftKey)U.openItemsOnWindow(z,!1);else U.openItems(z)}}}else if(j.code==="KeyI"){if(!j.shiftKey)return;if(G===U.TYPE){const z=x.parentElement;if(z!==void 0){if(z.noopen)return;U.openItemsOnWindow(z,!0)}}}else if(j.code==="KeyC"){if(!j.ctrlKey)return;if(G===U.TYPE){const z=x.parentElement;navigator.clipboard.writeText(z.btnTitle)}else if(G===L.TYPE){const z=x.parentElement;navigator.clipboard.writeText(z.btnUrl)}}else if(j.code==="KeyD"){if(j.ctrlKey||j.shiftKey)return;let z;if(z=x?.parentElement?.parentElement??void 0,z!==void 0&&z.btnType===U.TYPE)z.firstElementChild.focus()}},onkeydown(j){const x=j.target,G=x.btnType;if(j.code==="Enter"){if(G===U.TYPE){const z=x,J=x.parentElement;if(J.hasAttribute("open")){let Q=J.offsetTop-$.MAIN.offsetTop-z.clientHeight;if($.MAIN.scrollTop>Q)$.MAIN.scroll(0,Q)}}}},onpointerover(j){let x=j.target;if(x.getAttribute("name")==="more"){let z=x.parentElement.parentElement.parentElement,J=x.parentElement.nextElementSibling;if($.MAIN.offsetHeight+$.MAIN.scrollTop-J.offsetHeight<z.offsetTop)J.setAttribute("css-position","bottom");else J.setAttribute("css-position","top")}}};Promise.all([chrome.storage.local.get(),chrome.bookmarks.getTree(),chrome.tabs.query({active:!0,currentWindow:!0})]).then(function(j){let x=j[0],G=j[1];if(T=j[2][0],s(x),q.init(_),document.firstElementChild?.setAttribute("class",_.theme),G.length===1&&G[0].children!==void 0&&G[0].children.length>0)i(G[0]);else throw Error("The root BookmarkTreeNode is empty");document.addEventListener("keyup",M,!0),R.NAV.addEventListener("click",R.onclick,!1),R.NAV.addEventListener("auxclick",R.onauxclick,!1),$.MAIN.addEventListener("click",$.onclick,!1),$.MAIN.addEventListener("auxclick",$.onauxclick,!1),$.MAIN.addEventListener("pointerover",$.onpointerover,!1),$.MAIN.addEventListener("keyup",$.onkeyup,!1),$.MAIN.addEventListener("keydown",$.onkeydown,!1),V.MESSAGE.addEventListener("click",V.onclick,!1),V.MESSAGE.addEventListener("keyup",V.onkeyup,!1),V.MESSAGE.addEventListener("keydown",V.onkeydown,!1),Z.MODAL.addEventListener("click",B,!1),Z.FORM.addEventListener("submit",Z.onsubmit,!1),X.MODAL.addEventListener("click",B,!1),X.FORM.addEventListener("submit",X.onsubmit,!1),q.MODAL.addEventListener("click",B,!1),q.FORM.addEventListener("change",q.onchange,!1),k.MODAL.addEventListener("click",B,!1)});
