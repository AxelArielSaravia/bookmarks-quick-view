var g=function(){Z.id="",Z.target=null,Z.type="",Z.depth=0,Z.parentId="",Z.formType=""},T=function(){G.index=void 0,G.parentId=void 0,G.title="",G.url=void 0},w=function(){H.BTNode=null,H.target=null,H.timeout=void 0},i=function(V){var{open:_,focusTabs:A,foldersBefore:z,theme:J}=V,L=!1;if(_===void 0)L=!0;else U.open=_,j.modalConfigOpen.value=_;if(A===void 0)L=!0;else U.focusTabs=A,j.modalConfigFocus.checked=A;if(z===void 0)L=!0;else U.folderBefore=z,j.modalConfigFolders.checked=z;if(J===void 0)L=!0;else U.theme=J,document.firstElementChild?.setAttribute("class",J);if(L)chrome.storage.local.set(U,void 0)},a=function(V,_,A,z){var J=V[z];V[z]=V[A],V[A]=J;let L=0;for(let Q=_;Q<A;Q+=1)if(V[Q].title.localeCompare(V[A].title)<0)J=V[L+_],V[L+_]=V[Q],V[Q]=J,L+=1;return J=V[L+_],V[L+_]=V[A],V[A]=J,L+_},C=function(V,_,A){if(A-_<1)return V;let z=[_,A],J=0,L=0;while(z.length>0){if(_=z.shift(),A=z.shift(),J=Math.floor(Math.random()*(A-_)+_),L=a(V,_,A,J),L-1-_>0)z.push(_,L-1);if(A-(L+1)>0)z.push(L+1,A)}return V},D=function(V){let _=0;if(U.foldersBefore){for(let A=0;A<V.length;A+=1){let z=V[A];if(z.url===void 0){if(A!==_){let J=V[_];V[_]=z,V[A]=J}_+=1}}C(V,0,_-1),C(V,_,V.length-1)}else C(V,0,V.length-1);return V},O=function(V,_){const A=V.firstElementChild.firstElementChild.lastElementChild;A.textContent=_},B=function(V,_,A,z){if(V.url===void 0)$("BookmarkTreeNode.url is undefined");var J=A.content.cloneNode(!0),L=J.firstElementChild;L.setAttribute("data-id",V.id),L.setAttribute("data-depth",String(_)),L.setAttribute("title",`${V.title}\n${V.url}`);var Q=L.firstElementChild;Q.setAttribute("href",V.url),Q.style.setProperty("padding-left",`${_*10}px`);var X=Q.children[0];X.setAttribute("src",o(V.url));var K=Q.children[1];if(K.textContent=V.title,z!==void 0){var Y=L.lastElementChild,W=z.content.children,R=W[2].cloneNode(!0),F=W[5].cloneNode(!0);F.classList.add("c_center-children"),Y.appendChild(R),Y.appendChild(F)}return L},M=function(V,_,A){const z=V.firstElementChild;z.setAttribute("href",A),z.lastElementChild.textContent=_},u=function(V,_,A,z,J,L){var Q=[A],X=[V],K=-1,Y,W;while(X.length>0)if(Y=X[X.length-1],Y.children===void 0||K+1===Y.children.length){if(X.pop(),Y.index===void 0)$("BookmarkTreeNode.index is undefined");if(K=Y.index,W=Q.pop(),Q.length>0)Q[Q.length-1].appendChild(W);_-=1}else{if(Y=Y.children[K+1],_+=1,Y.children!==void 0)Q.push(k(Y,_,z,L));else Q.push(B(Y,_,J,L));X.push(Y),K=-1}return A},e=function(V){if(V.length===0||V[0].children===void 0||V[0].children.length===0)$("The bookmark roots does not exist");var _=V[0].children,A=j.templateButtons.content.children,z=A[0],J=A[1],L=A[4],Q=_[0],X=k(Q,1,j.templateDir,void 0),K=X.firstElementChild.children[1],Y=L.cloneNode(!0);if(X.setAttribute("open","true"),Y.classList.add("c_center-children"),K.appendChild(z.cloneNode(!0)),K.appendChild(J.cloneNode(!0)),K.appendChild(Y),Q.children!==void 0&&Q.children.length>0)u(Q,1,X,j.templateDir,j.templateItem,j.templateButtons);if(j.fragment.appendChild(X),Q=_[1],X=k(Q,1,j.templateDir,void 0),K=X.firstElementChild.children[1],Y=L.cloneNode(!0),Y.classList.add("c_center-children"),K.appendChild(z.cloneNode(!0)),K.appendChild(J.cloneNode(!0)),K.appendChild(Y),Q.children!==void 0&&Q.children.length>0)u(Q,1,X,j.templateDir,j.templateItem,j.templateButtons);j.fragment.appendChild(X),j.main.appendChild(j.fragment)},t=function(V){var _=V.target,A=_.getAttribute("data-button");if(A===null)$("ButtonType is null");if(A==="0")P.url="chrome://bookmarks/",P.active=!0,chrome.tabs.create(P,void 0);else if(A==="1")j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","0");else if(A==="2")window.close()};async function V1(V,_){var A=_,z=[_],J=[],L=[],Q=[],X=V;G.url=X.url,G.index=X.index,G.title=X.title,G.parentId=X.parentId;var K=await chrome.bookmarks.create(G,void 0);if(_.setAttribute("data-id",K.id),X.children.length>0)J.push(K.id),Array.prototype.push.apply(Q,X.children);while(Q.length>0){if(X=Q.shift(),X.index===void 0)$("BookmarkTreeNode.index is undefined");var Y=X.children!==void 0;if(!Y&&L.length>0&&L[0]===X.id)z.shift(),L.shift(),J.shift();G.url=X.url,G.index=X.index,G.title=X.title,G.parentId=J[0];var K=await chrome.bookmarks.create(G,void 0);if(_=z[0].children[X.index+1],_.setAttribute("data-id",K.id),Y&&X.children.length>0)z.push(_),J.push(K.id),L.push(X.children[0].id),Array.prototype.push.apply(Q,X.children)}j.messageUndo.setAttribute("data-display","0"),A.setAttribute("data-display","1"),w()}var _1=function(V){if(V===void 0)return;H.target.setAttribute("data-id",V.id),H.target.setAttribute("data-display","1"),j.messageUndo.setAttribute("data-display","0"),w()},A1=function(V){var _=V.target,A=_.getAttribute("data-button");if(A==="1")clearTimeout(H.timeout),H.target.remove(),j.messageUndo.setAttribute("data-display","0"),w();else if(A==="0"){if(H.timeout===void 0){console.warn("The undo action cannot be completed. The element was deleted"),w();return}if(clearTimeout(H.timeout),H.target===null)$("DeleteState.target is null");var z=H.BTNode;if(z===null)$("DelteState.BTNode is null");if(z.children===void 0)G.parentId=z.parentId,G.url=z.url,G.index=z.index,G.title=z.title,chrome.bookmarks.create(G,_1);else V1(z,H.target)}},j1=function(V){V.remove(),j.messageUndo.setAttribute("data-display","0"),w()},m=function(V){if(V.length===0){if(H.target!==null)H.target.remove();w();return}var _=V[0];H.BTNode=_,j.messageUndo.setAttribute("data-display","1");var A=j.messageUndo.children;if(A[0].textContent=_.title,A[1].textContent="removed",_.url===void 0)chrome.bookmarks.removeTree(_.id,void 0);else chrome.bookmarks.remove(_.id,void 0);H.timeout=setTimeout(j1,2000,H.target)},z1=function(V){if(H.timeout!==void 0)clearTimeout(H.timeout),H.target.remove();var _=V.parentElement,A=_.getAttribute("data-parent"),z="";if(A==="0"){var J=_.parentElement.parentElement;J.setAttribute("data-display","0"),z=J.getAttribute("data-id"),H.target=J,chrome.bookmarks.getSubTree(z,m)}else{var L=_.parentElement;L.setAttribute("data-display","0"),z=L.getAttribute("data-id"),H.target=L,chrome.bookmarks.get(z,m)}},J1=function(V){var _=j.modalForm;if(V.length===0)$("What the fuck, data is empty");var A=V[0];if(A.title!==void 0)_[0].value=A.title;if(A.url!==void 0)_[1].value=A.url;j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","1"),_[0].focus()},L1=function(V){var _=j.modal.children[1],A=V.parentElement,z=A.getAttribute("data-parent"),J="";if(Z.formType="0",z==="0"){let L=_.firstElementChild.firstElementChild;L.textContent="Edit folder";let Q=A.parentElement.parentElement;Z.target=Q;let X=Q.getAttribute("data-id");if(X!==null)J=X}else{let L=_.firstElementChild.firstElementChild;L.textContent="Edit bookmark";let Q=A.parentElement;Z.target=Q;let X=Q.getAttribute("data-id");if(X!==null)J=X}if(J.length===0)$("id is empty");Z.id=J,Z.type=z,_.setAttribute("data-edit",z),chrome.bookmarks.get(J,J1)},S=function(V,_,A){var z=V.parentElement.parentElement.parentElement,J=j.modalForm,L=z.getAttribute("data-id");if(L===null)$("id is null");Z.parentId=L,Z.formType="1",Z.target=z,Z.depth=Number(z.getAttribute("data-depth"));var Q=j.modal.children[1];if(Q.setAttribute("data-edit",_),_==="0")Q.firstElementChild.firstElementChild.textContent="CreateOptions folder";else{if(!A)J[0].value=I.title,J[1].value=I.url;Q.firstElementChild.firstElementChild.textContent="CreateOptions bookmark"}j.modal.setAttribute("data-display","1"),j.modal.setAttribute("data-show","1"),J[0].focus()};async function Q1(V){if(D(V),x.target===null)$("SortState.target is null");const _=x.target.children,A=[_[0]];for(let J=0;J<V.length;J+=1){var z=V[J];N.index=J,N.parentId=x.parentId,await chrome.bookmarks.move(z.id,N),A.push(_[z.index+1])}Element.prototype.replaceChildren.apply(x.target,A),x.target=null,x.parentId=""}var X1=function(V){let _=V.getAttribute("data-id");if(_===null)$("data-id is null");x.target=V,x.parentId=_,chrome.bookmarks.getChildren(_,Q1)},Y1=function(V){if(V===void 0||V.length===0)return;P.active=!1;for(let A=0;A<V.length;A+=1){var _=V[A];if(_.url!==void 0)P.url=_.url,chrome.tabs.create(P)}},p=function(V){if(V===void 0||V.length===0)return;E.url.length=0;for(let A=0;A<V.length;A+=1){var _=V[A];if(_.url!==void 0)E.url.push(_.url)}chrome.windows.create(E)},Z1=function(V){var _=V.target;const A=_.getAttribute("data-type");if(A==="10")V.preventDefault(),z1(_);else if(A==="9"){V.preventDefault();let J=_.parentElement.parentElement.parentElement;X1(J)}else if(A==="11"){V.preventDefault();let L=_.parentElement.parentElement.parentElement.getAttribute("data-id");chrome.bookmarks.getChildren(L,Y1)}else if(A==="12"){V.preventDefault();let L=_.parentElement.parentElement.parentElement.getAttribute("data-id");E.incognito=!1,chrome.bookmarks.getChildren(L,p)}else if(A==="13"){V.preventDefault();let L=_.parentElement.parentElement.parentElement.getAttribute("data-id");E.incognito=!0,chrome.bookmarks.getChildren(L,p)}else if(A==="7")V.preventDefault(),L1(_);else if(A==="6")V.preventDefault(),S(_,"0",!1);else if(A==="5")V.preventDefault(),S(_,"2",V.ctrlKey);else if(A==="3"){if(!V.shiftKey){V.preventDefault();var z=_.getAttribute("href");r(z,V.ctrlKey)}}},$1=function(V){var _=V.target,A=_.getAttribute("data-type");if(A==="3"){V.preventDefault();var z=_.getAttribute("href");P.url=z,P.active=U.focusTabs,chrome.tabs.create(P,void 0)}},G1=function(V){var _=V.target,A=_.getAttribute("data-type");if(A==="8"){var z=_.parentElement.parentElement.parentElement,J=_.parentElement.nextElementSibling,L=j.main.offsetHeight+j.main.scrollTop-(J.offsetHeight+_.parentElement.parentElement.offsetHeight);if(L<z.offsetTop)J.style.setProperty("top","unset"),J.style.setProperty("bottom","30px");else J.style.setProperty("top","30px"),J.style.setProperty("bottom","unset")}},K1=function(V){var _=V.target,A=_.getAttribute("data-type");if(A=="4"||A==="10"){var z=j.modal.getAttribute("data-show");if(z==="1"){if(Z.formType==="1")T();g();var J=j.modal.children[1];J.setAttribute("data-edit","");var L=j.modalForm;L[0].value="",L[1].value="",j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")}j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")}},H1=function(V){if(V===void 0)return;if(Z.target===null)$("ModalState.target is null");if(V.url===void 0)O(Z.target,V.title);else M(Z.target,V.title,V.url);g()};var U1=function(V){if(V===void 0)return;if(Z.target===null)$("ModalState.target is null");var _;if(v.id=V.id,v.title=V.title,V.url===void 0)_=k(v,Z.depth+1,j.templateDir,j.templateButtons);else v.url=V.url,_=B(v,Z.depth+1,j.templateItem,j.templateButtons);Z.target.appendChild(_),T(),g()},P1=function(V){V.preventDefault();var _=j.modalForm,A=j.modal?.children[1],z=_[0].value;if(Z.formType==="0"){if(y.title=z,Z.type==="0")y.url="";else{var J=_[1].value;y.url=J}chrome.bookmarks.update(Z.id,y,H1)}else{if(G.parentId=Z.parentId,G.title=z,Z.type==="0")G.url=void 0;else{var J=_[1].value;G.url=J}chrome.bookmarks.create(G,U1)}A.setAttribute("data-edit",""),_[0].value="",_[1].value="",j.modal.setAttribute("data-display","0"),j.modal.setAttribute("data-show","")},x1=function(V){var _=V.currentTarget;U.theme=_.value,document.firstElementChild?.setAttribute("class",_.value),chrome.storage.local.set(U,void 0)},W1=function(V){var _=V.currentTarget;U.open=_.value,chrome.storage.local.set(U,void 0)},w1=function(V){var _=V.currentTarget;U.focusTabs=_.checked,chrome.storage.local.set(U,void 0)},q1=function(V){var _=V.currentTarget;U.foldersBefore=_.checked,chrome.storage.local.set(U,void 0)},v1=function(V){I=V[0],j.headerButtons.onclick=t,j.messageUndo.lastElementChild.onclick=A1,j.main.onclick=Z1,j.main.onauxclick=$1,j.main.onpointerover=G1,j.modalConfigTheme.onchange=x1,j.modalConfigOpen.onchange=W1,j.modalConfigFocus.onchange=w1,j.modalConfigFolders.onchange=q1,j.modal.onclick=K1,j.modalForm.onsubmit=P1,chrome.bookmarks.getTree(e)},E1=function(){if(j.templateDir=document.getElementById("template_dir"),j.templateDir===null)$("DOM.templateDir is null");if(j.templateItem=document.getElementById("template_item"),j.templateItem===null)$("DOM.templateItem is null");if(j.templateButtons=document.getElementById("template_buttons"),j.templateButtons===null)$("DOM.templateButtons is null");if(j.headerButtons=document.getElementById("header_buttons"),j.headerButtons===null)$("DOM.headerButtons is null");if(j.messageUndo=document.getElementById("message_undo"),j.messageUndo===null)$("DOM.messageUndo is null");if(j.main=document.getElementById("main"),j.main===null)$("DOM.main is null");if(j.modal=document.getElementById("modal"),j.modal===null)$("DOM.modal is null");if(j.modalForm=document.getElementById("modal_form"),j.modalForm===null)$("DOM.modalForm is null");if(j.modalConfigTheme=document.getElementById("modal_config-theme"),j.modalConfigTheme===null)$("DOM.modalConfigTheme is null");if(j.modalConfigOpen=document.getElementById("modal_config-open"),j.modalConfigOpen===null)$("DOM.modalConfigOpen is null");if(j.modalConfigFocus=document.getElementById("modal_config-focus"),j.modalConfigFocus===null)$("DOM.modalConfigFocus is null");if(j.modalConfigFolders=document.getElementById("modal_config-folders"),j.modalConfigFolders===null)$("DOM.modalConfigFolders is null");chrome.storage.local.get(void 0,i),chrome.tabs.query({active:!0,currentWindow:!0},v1)};var j={templateDir:null,templateItem:null,templateButtons:null,headerButtons:null,messageUndo:null,main:null,modal:null,modalConfigTheme:null,modalConfigOpen:null,modalConfigFocus:null,modalConfigFolders:null,modalForm:null,fragment:document.createDocumentFragment()},U={focusTabs:!1,foldersBefore:!0,open:"0",theme:"dark"},Z={id:"",target:null,type:"",depth:0,parentId:"",formType:""},y={title:"",url:""},G={index:void 0,parentId:void 0,title:"",url:void 0},H={BTNode:null,target:null,timeout:void 0},x={target:null,parentId:""},N={index:0,parentId:""},I=void 0,$=function(V){throw Error(V)},P={active:!1,url:""},r=function(V,_){if(P.url=V,P.active=U.focusTabs,U.open==="0"===!_)chrome.tabs.update(I.id,P,void 0);else chrome.tabs.create(P,void 0)},f=new URL("http://t.i"),o=function(V){return f.href=chrome.runtime.getURL("/_favicon/"),f.searchParams.set("pageUrl",V),f.searchParams.set("size","16"),f.toString()},k=function(V,_,A,z){var J=A.content.cloneNode(!0),L=J.firstElementChild;L.setAttribute("data-id",V.id),L.setAttribute("data-depth",String(_)),L.setAttribute("title",V.title);var Q=L.firstElementChild,X=Q.firstElementChild;X.style.setProperty("padding-left",`${_*10}px`);var K=X.lastElementChild;if(K.textContent=V.title,z!==void 0){var Y=z.content.cloneNode(!0).children,W=Y[0],R=Y[1],F=Y[2],s=Y[3],h=Y[4],c=Y[5],n=Y[6],l=Y[7],d=Y[8],b=Q.children[1],q=Q.children[2];b.appendChild(W),b.appendChild(R),b.appendChild(F),b.appendChild(s),h.insertAdjacentText("beforeend","Sort A-Z"),c.insertAdjacentText("beforeend","Remove folder"),q.appendChild(n),q.appendChild(l),q.appendChild(d),q.appendChild(h),q.appendChild(c)}return L},E={incognito:!1,url:[],setSelfAsOpener:!1},v={id:"",title:"",url:""};window.addEventListener("DOMContentLoaded",E1);
