var g=function(){X.id="",X.target=null,X.type="",X.depth=0,X.parentId="",X.formType=""},p=function(){Z.index=void 0,Z.parentId=void 0,Z.title="",Z.url=void 0},w=function(){$.BTNode=null,$.target=null,$.timeout=void 0},d=function(_){var{open:x,focusTabs:A,foldersBefore:z}=_,j=!1;if(x===void 0)j=!0;else K.open=x,L.modalConfigOpen.value=x;if(A===void 0||typeof A!=="boolean")j=!0;else K.focusTabs=A,L.modalConfigFocus.checked=A;if(z===void 0)j=!0;else K.folderBefore=z,L.modalConfigFolders.checked=z;if(j)chrome.storage.local.set(K,void 0)},o=function(_,x,A,z){var j=_[z];_[z]=_[A],_[A]=j;let G=0;for(let J=x;J<A;J+=1)if(_[J].title.localeCompare(_[A].title)<0)j=_[G+x],_[G+x]=_[J],_[J]=j,G+=1;return j=_[G+x],_[G+x]=_[A],_[A]=j,G+x},N=function(_,x,A){if(A-x<1)return _;let z=[x,A],j=0,G=0;while(z.length>0){if(x=z.shift(),A=z.shift(),j=Math.floor(Math.random()*(A-x)+x),G=o(_,x,A,j),G-1-x>0)z.push(x,G-1);if(A-(G+1)>0)z.push(G+1,A)}return _},a=function(_){let x=0;if(K.foldersBefore){for(let A=0;A<_.length;A+=1){let z=_[A];if(z.url===void 0){if(A!==x){let j=_[x];_[x]=z,_[A]=j}x+=1}}N(_,0,x-1),N(_,x,_.length-1)}else N(_,0,_.length-1);return _},D=function(_,x){_.firstElementChild.firstElementChild.lastElementChild.textContent=x},T=function(_,x,A,z){if(_.url===void 0)Y("BookmarkTreeNode.url is undefined");var j=A.content.cloneNode(!0),G=j.firstElementChild;G.setAttribute("data-id",_.id),G.setAttribute("data-depth",String(x)),G.setAttribute("title",`${_.title}\n${_.url}`);var J=G.firstElementChild;J.setAttribute("href",_.url),J.style.setProperty("padding-left",`${x*10}px`);var Q=J.children[0];Q.setAttribute("src",r(_.url));var H=J.children[1];if(H.textContent=_.title,z!==void 0){var V=G.lastElementChild,U=z.content.children,k=U[2].cloneNode(!0),b=U[5].cloneNode(!0);b.classList.add("c_center-children"),V.appendChild(k),V.appendChild(b)}return G},O=function(_,x,A){const z=_.firstElementChild;z.setAttribute("href",A),z.lastElementChild.textContent=x},M=function(_,x,A,z,j,G){var J=[A],Q=[_],H=-1,V,U;while(Q.length>0)if(V=Q[Q.length-1],V.children===void 0||H+1===V.children.length){if(Q.pop(),V.index===void 0)Y("BookmarkTreeNode.index is undefined");if(H=V.index,U=J.pop(),J.length>0)J[J.length-1].appendChild(U);x-=1}else{if(V=V.children[H+1],x+=1,V.children!==void 0)J.push(C(V,x,z,G));else J.push(T(V,x,j,G));Q.push(V),H=-1}return A},e=function(_){if(_.length===0||_[0].children===void 0||_[0].children.length===0)Y("The bookmark roots does not exist");var x=_[0].children,A=L.templateButtons.content.children,z=A[0],j=A[1],G=A[4];for(var J=0;J<x.length;J+=1){var Q=x[J],H=C(Q,1,L.templateDir,void 0);if(J==0)H.setAttribute("data-open","1");var V=H.firstElementChild.children[1],U=G.cloneNode(!0);if(U.classList.add("c_center-children"),V.appendChild(z.cloneNode(!0)),V.appendChild(j.cloneNode(!0)),V.appendChild(U),Q.children!==void 0&&Q.children.length>0)M(Q,1,H,L.templateDir,L.templateItem,L.templateButtons);L.fragment.appendChild(H)}L.main.appendChild(L.fragment)},t=function(_){var x=_.target,A=x.getAttribute("data-button");if(A===null)Y("ButtonType is null");if(A==="0")P.url="chrome://bookmarks/",P.active=!0,chrome.tabs.create(P,void 0);else if(A==="1")L.modal.setAttribute("data-display","1"),L.modal.setAttribute("data-show","0");else if(A==="2")window.close()};async function _0(_,x){var A=x,z=[x],j=[],G=[],J=[],Q=_;Z.url=Q.url,Z.index=Q.index,Z.title=Q.title,Z.parentId=Q.parentId;var H=await chrome.bookmarks.create(Z,void 0);if(x.setAttribute("data-id",H.id),Q.children.length>0)j.push(H.id),Array.prototype.push.apply(J,Q.children);while(J.length>0){if(Q=J.shift(),Q.index===void 0)Y("BookmarkTreeNode.index is undefined");var V=Q.children!==void 0;if(!V&&G.length>0&&G[0]===Q.id)z.shift(),G.shift(),j.shift();Z.url=Q.url,Z.index=Q.index,Z.title=Q.title,Z.parentId=j[0];var H=await chrome.bookmarks.create(Z,void 0);if(x=z[0].children[Q.index+1],x.setAttribute("data-id",H.id),V&&Q.children.length>0)z.push(x),j.push(H.id),G.push(Q.children[0].id),Array.prototype.push.apply(J,Q.children)}L.messageUndo.setAttribute("data-display","0"),A.setAttribute("data-display","1"),w()}var x0=function(_){if(_===void 0)return;$.target.setAttribute("data-id",_.id),$.target.setAttribute("data-display","1"),L.messageUndo.setAttribute("data-display","0"),w()},A0=function(_){var x=_.target,A=x.getAttribute("data-button");if(A==="1")clearTimeout($.timeout),$.target.remove(),L.messageUndo.setAttribute("data-display","0"),w();else if(A==="0"){if($.timeout===void 0){console.warn("The undo action cannot be completed. The element was deleted"),w();return}if(clearTimeout($.timeout),$.target===null)Y("DeleteState.target is null");var z=$.BTNode;if(z===null)Y("DelteState.BTNode is null");if(z.children===void 0)Z.parentId=z.parentId,Z.url=z.url,Z.index=z.index,Z.title=z.title,chrome.bookmarks.create(Z,x0);else _0(z,$.target)}},L0=function(_){_.remove(),L.messageUndo.setAttribute("data-display","0"),w()},m=function(_){if(_.length===0){if($.target!==null)$.target.remove();w();return}var x=_[0];$.BTNode=x,L.messageUndo.setAttribute("data-display","1");var A=L.messageUndo.children;if(A[0].textContent=x.title,A[1].textContent="removed",x.url===void 0)chrome.bookmarks.removeTree(x.id,void 0);else chrome.bookmarks.remove(x.id,void 0);$.timeout=setTimeout(L0,2000,$.target)},j0=function(_){if($.timeout!==void 0)clearTimeout($.timeout),$.target.remove();var x=_.parentElement,A=x.getAttribute("data-parent"),z="";if(A==="0"){var j=x.parentElement.parentElement;j.setAttribute("data-display","0"),z=j.getAttribute("data-id"),$.target=j,chrome.bookmarks.getSubTree(z,m)}else{var G=x.parentElement;G.setAttribute("data-display","0"),z=G.getAttribute("data-id"),$.target=G,chrome.bookmarks.get(z,m)}},z0=function(_){var x=L.modalForm;if(_.length===0)Y("What the fuck, data is empty");var A=_[0];if(A.title!==void 0)x[0].value=A.title;if(A.url!==void 0)x[1].value=A.url;L.modal.setAttribute("data-display","1"),L.modal.setAttribute("data-show","1"),x[0].focus()},G0=function(_){var x=L.modal.children[1],A=_.parentElement,z=A.getAttribute("data-parent"),j="";if(X.formType="0",z==="0"){x.firstElementChild.firstElementChild.textContent="Edit folder";let G=A.parentElement.parentElement;X.target=G;let J=G.getAttribute("data-id");if(J!==null)j=J}else{x.firstElementChild.firstElementChild.textContent="Edit bookmark";let G=A.parentElement;X.target=G;let J=G.getAttribute("data-id");if(J!==null)j=J}if(j.length===0)Y("id is empty");X.id=j,X.type=z,x.setAttribute("data-edit",z),chrome.bookmarks.get(j,z0)},S=function(_,x,A){var z=_.parentElement.parentElement.parentElement,j=L.modalForm,G=z.getAttribute("data-id");if(G===null)Y("id is null");X.parentId=G,X.formType="1",X.target=z,X.depth=Number(z.getAttribute("data-depth"));var J=L.modal.children[1];if(J.setAttribute("data-edit",x),x==="0")J.firstElementChild.firstElementChild.textContent="CreateOptions folder";else{if(!A)j[0].value=I.title,j[1].value=I.url;J.firstElementChild.firstElementChild.textContent="CreateOptions bookmark"}L.modal.setAttribute("data-display","1"),L.modal.setAttribute("data-show","1"),j[0].focus()};async function J0(_){if(a(_),W.target===null)Y("SortState.target is null");const x=W.target.children,A=[x[0]];for(let j=0;j<_.length;j+=1){var z=_[j];R.index=j,R.parentId=W.parentId,await chrome.bookmarks.move(z.id,R),A.push(x[z.index+1])}Element.prototype.replaceChildren.apply(W.target,A),W.target=null,W.parentId=""}var Q0=function(_){let x=_.getAttribute("data-id");if(x===null)Y("data-id is null");W.target=_,W.parentId=x,chrome.bookmarks.getChildren(x,J0)},V0=function(_){if(_===void 0||_.length===0)return;P.active=!1;for(let A=0;A<_.length;A+=1){var x=_[A];if(x.url!==void 0)P.url=x.url,chrome.tabs.create(P)}},u=function(_){if(_===void 0||_.length===0)return;F.url.length=0;for(let A=0;A<_.length;A+=1){var x=_[A];if(x.url!==void 0)F.url.push(x.url)}chrome.windows.create(F)},X0=function(_){var x=_.target;const A=x.getAttribute("data-type");if(A==="10")_.preventDefault(),j0(x);else if(A==="9"){_.preventDefault();let j=x.parentElement.parentElement.parentElement;Q0(j)}else if(A==="11"){_.preventDefault();let G=x.parentElement.parentElement.parentElement.getAttribute("data-id");chrome.bookmarks.getChildren(G,V0)}else if(A==="12"){_.preventDefault();let G=x.parentElement.parentElement.parentElement.getAttribute("data-id");F.incognito=!1,chrome.bookmarks.getChildren(G,u)}else if(A==="13"){_.preventDefault();let G=x.parentElement.parentElement.parentElement.getAttribute("data-id");F.incognito=!0,chrome.bookmarks.getChildren(G,u)}else if(A==="7")_.preventDefault(),G0(x);else if(A==="6")_.preventDefault(),S(x,"0",!1);else if(A==="5")_.preventDefault(),S(x,"2",_.ctrlKey);else if(A==="3"){if(!_.shiftKey){_.preventDefault();var z=x.getAttribute("href");i(z,_.ctrlKey)}}else if(A==="1"){_.preventDefault();let j=x.parentElement.parentElement;if(j.getAttribute("data-open")==="0")j.setAttribute("data-open","1");else j.setAttribute("data-open","0")}},Y0=function(_){var x=_.target,A=x.getAttribute("data-type");if(A==="8"){var z=x.parentElement.parentElement.parentElement,j=x.parentElement.nextElementSibling,G=L.main.offsetHeight+L.main.scrollTop-85;if(G<z.offsetTop)j.style.setProperty("top","unset"),j.style.setProperty("bottom","30px");else j.style.setProperty("top","30px"),j.style.setProperty("bottom","unset")}},Z0=function(_){var x=_.target,A=x.getAttribute("data-type");if(A=="4"||A==="10"){var z=L.modal.getAttribute("data-show");if(z==="1"){if(X.formType==="1")p();g();var j=L.modal.children[1];j.setAttribute("data-edit","");var G=L.modalForm;G[0].value="",G[1].value="",L.modal.setAttribute("data-display","0"),L.modal.setAttribute("data-show","")}L.modal.setAttribute("data-display","0"),L.modal.setAttribute("data-show","")}},$0=function(_){if(_===void 0)return;if(X.target===null)Y("ModalState.target is null");if(_.url===void 0)D(X.target,_.title);else O(X.target,_.title,_.url);g()};var H0=function(_){if(_===void 0)return;if(X.target===null)Y("ModalState.target is null");var x;if(v.id=_.id,v.title=_.title,_.url===void 0)x=C(v,X.depth+1,L.templateDir,L.templateButtons);else v.url=_.url,x=T(v,X.depth+1,L.templateItem,L.templateButtons);X.target.appendChild(x),p(),g()},K0=function(_){_.preventDefault();var x=L.modalForm,A=L.modal?.children[1],z=x[0].value;if(X.formType==="0"){if(y.title=z,X.type==="0")y.url="";else{var j=x[1].value;y.url=j}chrome.bookmarks.update(X.id,y,$0)}else{if(Z.parentId=X.parentId,Z.title=z,X.type==="0")Z.url=void 0;else{var j=x[1].value;Z.url=j}chrome.bookmarks.create(Z,H0)}A.setAttribute("data-edit",""),x[0].value="",x[1].value="",L.modal.setAttribute("data-display","0"),L.modal.setAttribute("data-show","")},U0=function(_){var x=_.currentTarget;K.open=x.value,chrome.storage.local.set(K,void 0)},P0=function(_){var x=_.currentTarget;K.focusTabs=x.checked,chrome.storage.local.set(K,void 0)},W0=function(_){var x=_.currentTarget;K.foldersBefore=x.checked,chrome.storage.local.set(K,void 0)},w0=function(_){I=_[0],L.headerButtons.onclick=t,L.messageUndo.lastElementChild.onclick=A0,L.main.onclick=X0,L.main.onpointerover=Y0,L.modalConfigOpen.onchange=U0,L.modalConfigFocus.onchange=P0,L.modalConfigFolders.onchange=W0,L.modal.onclick=Z0,L.modalForm.onsubmit=K0,chrome.bookmarks.getTree(e)},q0=function(){if(L.templateDir=document.getElementById("template_dir"),L.templateDir===null)Y("DOM.templateDir is null");if(L.templateItem=document.getElementById("template_item"),L.templateItem===null)Y("DOM.templateItem is null");if(L.templateButtons=document.getElementById("template_buttons"),L.templateButtons===null)Y("DOM.templateButtons is null");if(L.headerButtons=document.getElementById("header_buttons"),L.headerButtons===null)Y("DOM.headerButtons is null");if(L.messageUndo=document.getElementById("message_undo"),L.messageUndo===null)Y("DOM.messageUndo is null");if(L.main=document.getElementById("main"),L.main===null)Y("DOM.main is null");if(L.modal=document.getElementById("modal"),L.modal===null)Y("DOM.modal is null");if(L.modalForm=document.getElementById("modal_form"),L.modalForm===null)Y("DOM.modalForm is null");if(L.modalConfigOpen=document.getElementById("modal_config-open"),L.modalConfigOpen===null)Y("DOM.modalConfigOpen is null");if(L.modalConfigFocus=document.getElementById("modal_config-focus"),L.modalConfigFocus===null)Y("DOM.modalConfigFocus is null");if(L.modalConfigFolders=document.getElementById("modal_config-folders"),L.modalConfigFolders===null)Y("DOM.modalConfigFolders is null");chrome.storage.local.get(void 0,d),chrome.tabs.query({active:!0,currentWindow:!0},w0)};var L={templateDir:null,templateItem:null,templateButtons:null,headerButtons:null,messageUndo:null,main:null,modal:null,modalConfigOpen:null,modalConfigFocus:null,modalConfigFolders:null,modalForm:null,fragment:document.createDocumentFragment()},K={focusTabs:!1,foldersBefore:!0,open:"0"},X={id:"",target:null,type:"",depth:0,parentId:"",formType:""},y={title:"",url:""},Z={index:void 0,parentId:void 0,title:"",url:void 0},$={BTNode:null,target:null,timeout:void 0},W={target:null,parentId:""},R={index:0,parentId:""},I=void 0,Y=function(_){throw Error(_)},P={active:!1,url:""},i=function(_,x){if(P.url=_,P.active=K.focusTabs,K.open==="0"===!x)chrome.tabs.update(I.id,P,void 0);else chrome.tabs.create(P,void 0)},f=new URL("http://t.i"),r=function(_){return f.href=chrome.runtime.getURL("/_favicon/"),f.searchParams.set("pageUrl",_),f.searchParams.set("size","16"),f.toString()},C=function(_,x,A,z){var j=A.content.cloneNode(!0),G=j.firstElementChild;G.setAttribute("data-id",_.id),G.setAttribute("data-depth",String(x)),G.setAttribute("title",_.title);var J=G.firstElementChild,Q=J.firstElementChild;Q.style.setProperty("padding-left",`${x*10}px`);var H=Q.lastElementChild;if(H.textContent=_.title,z!==void 0){var V=z.content.cloneNode(!0).children,U=V[0],k=V[1],b=V[2],B=V[3],h=V[4],c=V[5],s=V[6],n=V[7],l=V[8],E=J.children[1],q=J.children[2];E.appendChild(U),E.appendChild(k),E.appendChild(b),E.appendChild(B),h.insertAdjacentText("beforeend","Sort A-Z"),c.insertAdjacentText("beforeend","Remove folder"),q.appendChild(s),q.appendChild(n),q.appendChild(l),q.appendChild(h),q.appendChild(c)}return G},F={incognito:!1,url:[],setSelfAsOpener:!1},v={id:"",title:"",url:""};window.addEventListener("DOMContentLoaded",q0);
