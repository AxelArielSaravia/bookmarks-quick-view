var c=function(){Y.id="",Y.target=null,Y.type="",Y.depth=0,Y.parentId="",Y.formType=""},n=function(){$.index=void 0,$.parentId=void 0,$.title="",$.url=void 0},v=function(){P.BTNode=null,P.target=null,P.timeout=void 0},O=function(_){var{open:L,focusTabs:j,foldersBefore:J,theme:A}=_,G=!1;if(L===void 0)G=!0;else U.open=L,z.modalConfigOpen.value=L;if(j===void 0)G=!0;else U.focusTabs=j,z.modalConfigFocus.checked=j;if(J===void 0)G=!0;else U.folderBefore=J,z.modalConfigFolders.checked=J;if(A===void 0)G=!0;else U.theme=A,document.firstElementChild?.setAttribute("class",A);if(G)chrome.storage.local.set(U,void 0)},__=function(_,L,j,J){var A=_[J];_[J]=_[j],_[j]=A;let G=0;for(let V=L;V<j;V+=1)if(_[V].title.localeCompare(_[j].title)<0)A=_[G+L],_[G+L]=_[V],_[V]=A,G+=1;return A=_[G+L],_[G+L]=_[j],_[j]=A,G+L},g=function(_,L,j){if(j-L<1)return _;let J=[L,j],A=0,G=0;while(J.length>0){if(L=J.shift(),j=J.shift(),A=Math.floor(Math.random()*(j-L)+L),G=__(_,L,j,A),G-1-L>0)J.push(L,G-1);if(j-(G+1)>0)J.push(G+1,j)}return _},L_=function(_){let L=0;if(U.foldersBefore){for(let j=0;j<_.length;j+=1){let J=_[j];if(J.url===void 0){if(j!==L){let A=_[L];_[L]=J,_[j]=A}L+=1}}g(_,0,L-1),g(_,L,_.length-1)}else g(_,0,_.length-1);return _},j_=function(_,L){const j=_.firstElementChild.firstElementChild.lastElementChild;j.textContent=L},l=function(_,L,j,J){if(_.url===void 0)Z("BookmarkTreeNode.url is undefined");var A=j.content.cloneNode(!0),G=A.firstElementChild;G.setAttribute("data-id",_.id),G.setAttribute("data-depth",String(L)),G.setAttribute("title",`${_.title}\n${_.url}`);var V=G.firstElementChild;V.setAttribute("href",_.url),V.style.setProperty("padding-left",`${L*10}px`);var Q=V.children[0];Q.setAttribute("src",e(_.url));var K=V.children[1];if(K.textContent=_.title,J!==void 0){var X=G.lastElementChild,q=J.content.children,C=q[2].cloneNode(!0),y=q[5].cloneNode(!0);y.classList.add("c_center-children"),X.appendChild(C),X.appendChild(y)}return G},z_=function(_,L,j){const J=_.firstElementChild;J.setAttribute("href",j),J.lastElementChild.textContent=L},B=function(_,L,j,J,A,G){var V=[j],Q=[_],K=-1,X,q;while(Q.length>0)if(X=Q[Q.length-1],X.children===void 0||K+1===X.children.length){if(Q.pop(),X.index===void 0)Z("BookmarkTreeNode.index is undefined");if(K=X.index,q=V.pop(),V.length>0)V[V.length-1].appendChild(q);L-=1}else{if(X=X.children[K+1],L+=1,X.children!==void 0)V.push(k(X,L,J,G));else V.push(l(X,L,A,G));Q.push(X),K=-1}return j},A_=function(_){if(_.length===0||_[0].children===void 0||_[0].children.length===0)Z("The bookmark roots does not exist");var L=_[0].children,j=z.templateButtons.content.children,J=j[0],A=j[1],G=j[4],V=L[0],Q=k(V,1,z.templateDir,void 0),K=Q.firstElementChild.children[1],X=G.cloneNode(!0);if(Q.setAttribute("open","true"),X.classList.add("c_center-children"),K.appendChild(J.cloneNode(!0)),K.appendChild(A.cloneNode(!0)),K.appendChild(X),V.children!==void 0&&V.children.length>0)B(V,1,Q,z.templateDir,z.templateItem,z.templateButtons);if(z.fragment.appendChild(Q),V=L[1],Q=k(V,1,z.templateDir,void 0),K=Q.firstElementChild.children[1],X=G.cloneNode(!0),X.classList.add("c_center-children"),K.appendChild(J.cloneNode(!0)),K.appendChild(A.cloneNode(!0)),K.appendChild(X),V.children!==void 0&&V.children.length>0)B(V,1,Q,z.templateDir,z.templateItem,z.templateButtons);z.fragment.appendChild(Q),z.main.appendChild(z.fragment)},G_=function(_){var L=_.target,j=L.getAttribute("data-button");if(j===null)Z("ButtonType is null");if(j==="0")x.url="about://bookmarks/",x.active=!0,chrome.tabs.create(x,void 0);else if(j==="1")z.modal.setAttribute("data-display","1"),z.modal.setAttribute("data-show","0"),z.modal.firstElementChild.children[1].lastElementChild.focus(),H=L;else if(j==="2")window.close()};async function J_(_,L){var j=L,J=[L],A=[],G=[],V=[],Q=_;$.url=Q.url,$.index=Q.index,$.title=Q.title,$.parentId=Q.parentId;var K=await chrome.bookmarks.create($,void 0);if(L.setAttribute("data-id",K.id),Q.children.length>0)A.push(K.id),Array.prototype.push.apply(V,Q.children);while(V.length>0){if(Q=V.shift(),Q.index===void 0)Z("BookmarkTreeNode.index is undefined");var X=Q.children!==void 0;if(!X&&G.length>0&&G[0]===Q.id)J.shift(),G.shift(),A.shift();$.url=Q.url,$.index=Q.index,$.title=Q.title,$.parentId=A[0];var K=await chrome.bookmarks.create($,void 0);if(L=J[0].children[Q.index+1],L.setAttribute("data-id",K.id),X&&Q.children.length>0)J.push(L),A.push(K.id),G.push(Q.children[0].id),Array.prototype.push.apply(V,Q.children)}z.messageUndo.setAttribute("data-display","0"),j.setAttribute("data-display","1"),v()}var Q_=function(_){if(_===void 0)return;P.target.setAttribute("data-id",_.id),P.target.setAttribute("data-display","1"),z.messageUndo.setAttribute("data-display","0"),v()},V_=function(){if(P.timeout===void 0){console.warn("The undo action cannot be completed. The element was deleted"),v();return}if(clearTimeout(P.timeout),P.target===null)Z("DeleteState.target is null");var _=P.BTNode;if(_===null)Z("DelteState.BTNode is null");if(_.children===void 0)$.parentId=_.parentId,$.url=_.url,$.index=_.index,$.title=_.title,chrome.bookmarks.create($,Q_);else J_(_,P.target)},X_=function(_){var L=_.target,j=L.getAttribute("data-button");if(j==="1")clearTimeout(P.timeout),P.target.remove(),z.messageUndo.setAttribute("data-display","0"),v();else if(j==="0"){if(V_(),H!==null)H.focus(),H=null}},Y_=function(_){_.remove(),z.messageUndo.setAttribute("data-display","0"),v()},s=function(_){if(_.length===0){if(P.target!==null)P.target.remove();v();return}var L=_[0];P.BTNode=L,z.messageUndo.setAttribute("data-display","1"),z.messageUndo?.lastElementChild?.firstElementChild.focus();var j=z.messageUndo.children;if(j[0].textContent=L.title,j[1].textContent="removed",L.url===void 0)chrome.bookmarks.removeTree(L.id,void 0);else chrome.bookmarks.remove(L.id,void 0);P.timeout=setTimeout(Y_,2000,P.target)},m=function(_){if(P.timeout!==void 0)clearTimeout(P.timeout),P.target.remove();var L=_.parentElement,j=L.getAttribute("data-parent"),J="";if(j==="0"){var A=L.parentElement.parentElement;A.setAttribute("data-display","0"),J=A.getAttribute("data-id"),P.target=A,chrome.bookmarks.getSubTree(J,s)}else{var G=L.parentElement;G.setAttribute("data-display","0"),J=G.getAttribute("data-id"),P.target=G,chrome.bookmarks.get(J,s)}},Z_=function(_){var L=z.modalForm;if(_.length===0)Z("What the fuck, data is empty");var j=_[0];if(j.title!==void 0)L[0].value=j.title;if(j.url!==void 0)L[1].value=j.url;z.modal.setAttribute("data-display","1"),z.modal.setAttribute("data-show","1"),L[0].focus()},S=function(_){var L=z.modal.children[1],j=_.parentElement,J=j.getAttribute("data-parent"),A="";if(Y.formType="0",J==="0"){let G=L.firstElementChild.firstElementChild;G.textContent="Edit folder";let V=j.parentElement.parentElement;Y.target=V;let Q=V.getAttribute("data-id");if(Q!==null)A=Q}else{let G=L.firstElementChild.firstElementChild;G.textContent="Edit bookmark";let V=j.parentElement;Y.target=V;let Q=V.getAttribute("data-id");if(Q!==null)A=Q}if(A.length===0)Z("id is empty");Y.id=A,Y.type=J,L.setAttribute("data-edit",J),chrome.bookmarks.get(A,Z_)},N=function(_,L,j){var J=z.modalForm,A=_.getAttribute("data-id");if(A===null)Z("id is null");Y.parentId=A,Y.formType="1",Y.target=_,Y.depth=Number(_.getAttribute("data-depth"));var G=z.modal.children[1];if(G.setAttribute("data-edit",L),L==="0")G.firstElementChild.firstElementChild.textContent="CreateOptions folder";else{if(!j)J[0].value=R.title,J[1].value=R.url;G.firstElementChild.firstElementChild.textContent="CreateOptions bookmark"}z.modal.setAttribute("data-display","1"),z.modal.setAttribute("data-show","1"),J[0].focus()};async function $_(_){if(L_(_),W.target===null)Z("SortState.target is null");const L=W.target.children,j=[L[0]];for(let A=0;A<_.length;A+=1){var J=_[A];h.index=A,h.parentId=W.parentId,await chrome.bookmarks.move(J.id,h),j.push(L[J.index+1])}Element.prototype.replaceChildren.apply(W.target,j),W.target=null,W.parentId=""}var d=function(_){let L=_.getAttribute("data-id");if(L===null)Z("data-id is null");W.target=_,W.parentId=L,chrome.bookmarks.getChildren(L,$_)},i=function(_){if(_===void 0||_.length===0)return;x.active=!1;for(let j=0;j<_.length;j+=1){var L=_[j];if(L.url!==void 0)x.url=L.url,chrome.tabs.create(x)}},u=function(_){if(_===void 0||_.length===0)return;w.url.length=0;for(let j=0;j<_.length;j+=1){var L=_[j];if(L.url!==void 0)w.url.push(L.url)}chrome.windows.create(w)},K_=function(_){var L=_.target;const j=L.getAttribute("data-type");if(j==="10")_.preventDefault(),m(L);else if(j==="9"){_.preventDefault();let A=L.parentElement.parentElement.parentElement;d(A)}else if(j==="11"){_.preventDefault();let G=L.parentElement.parentElement.parentElement.getAttribute("data-id");chrome.bookmarks.getChildren(G,i)}else if(j==="12"){_.preventDefault();let G=L.parentElement.parentElement.parentElement.getAttribute("data-id");w.incognito=!1,chrome.bookmarks.getChildren(G,u)}else if(j==="13"){_.preventDefault();let G=L.parentElement.parentElement.parentElement.getAttribute("data-id");w.incognito=!0,chrome.bookmarks.getChildren(G,u)}else if(j==="7")_.preventDefault(),S(L);else if(j==="6"){_.preventDefault();let A=L.parentElement.parentElement.parentElement;N(A,"0",!1)}else if(j==="5"){_.preventDefault();let A=L.parentElement.parentElement.parentElement;N(A,"2",_.ctrlKey)}else if(j==="3"){if(!_.shiftKey){_.preventDefault();var J=L.getAttribute("href");t(J,_.ctrlKey)}}},P_=function(_){var L=_.target,j,J=L.getAttribute("data-type");if(J==="1"){if(_.code==="KeyQ"){if(H=L,j=L?.lastElementChild?.lastElementChild,j!==null||j!==void 0)m(j)}else if(_.code==="KeyE"){if(H=L,j=L?.children[1]?.children[2],j.getAttribute("data-type")==="7")S(j)}else if(_.code==="KeyC"){_.preventDefault(),H=L;let A=L.parentElement;N(A,"0",!1)}else if(_.code==="KeyA"){_.preventDefault(),H=L;let A=L.parentElement;N(A,"2",_.ctrlKey)}else if(_.code==="KeyS")d(L.parentElement);else if(_.code==="KeyO"){let A=L.parentElement.getAttribute("data-id");if(A==="1"||A==="2")return;if(_.shiftKey)w.incognito=!1,chrome.bookmarks.getChildren(A,u);else chrome.bookmarks.getChildren(A,i)}}else if(J==="3"){if(_.code==="KeyQ")H=L,m(L?.nextElementSibling?.lastElementChild);else if(_.code==="KeyE")H=L,S(L?.nextElementSibling?.firstElementChild)}},U_=function(_){var L=_.target,j=L.getAttribute("data-type");if(j==="3"){_.preventDefault();var J=L.getAttribute("href");x.url=J,x.active=U.focusTabs,chrome.tabs.create(x,void 0)}},H_=function(_){var L=_.target,j=L.getAttribute("data-type");if(j==="8"){var J=L.parentElement.parentElement.parentElement,A=L.parentElement.nextElementSibling,G=z.main.offsetHeight+z.main.scrollTop-(A.offsetHeight+L.parentElement.parentElement.offsetHeight);if(G<J.offsetTop)A.style.setProperty("top","unset"),A.style.setProperty("bottom","30px");else A.style.setProperty("top","30px"),A.style.setProperty("bottom","unset")}},r=function(){var _=z.modal.getAttribute("data-show");if(_==="1"){if(Y.formType==="1")n();c();var L=z.modal.children[1];L.setAttribute("data-edit","");var j=z.modalForm;j[0].value="",j[1].value="",z.modal.setAttribute("data-display","0"),z.modal.setAttribute("data-show","")}z.modal.setAttribute("data-display","0"),z.modal.setAttribute("data-show","")},x_=function(_){var L=_.target,j=L.getAttribute("data-type");if(j=="4"||j==="10")r()},W_=function(_){if(_.code==="Escape"){if(_.preventDefault(),r(),H!==null)H.focus(),H=null}},q_=function(_){if(_===void 0)return;if(Y.target===null)Z("ModalState.target is null");if(_.url===void 0)j_(Y.target,_.title);else z_(Y.target,_.title,_.url);c()};var w_=function(_){if(_===void 0)return;if(Y.target===null)Z("ModalState.target is null");var L;if(b.id=_.id,b.title=_.title,_.url===void 0)L=k(b,Y.depth+1,z.templateDir,z.templateButtons);else b.url=_.url,L=l(b,Y.depth+1,z.templateItem,z.templateButtons);Y.target.appendChild(L),n(),c()},v_=function(_){_.preventDefault();var L=z.modalForm,j=z.modal?.children[1],J=L[0].value;if(Y.formType==="0"){if(F.title=J,Y.type==="0")F.url="";else{var A=L[1].value;F.url=A}chrome.bookmarks.update(Y.id,F,q_)}else{if($.parentId=Y.parentId,$.title=J,Y.type==="0")$.url=void 0;else{var A=L[1].value;$.url=A}chrome.bookmarks.create($,w_)}if(j.setAttribute("data-edit",""),L[0].value="",L[1].value="",z.modal.setAttribute("data-display","0"),z.modal.setAttribute("data-show",""),H!==null)H.focus(),H=null},E_=function(_){var L=_.currentTarget;U.theme=L.value,document.firstElementChild?.setAttribute("class",L.value),chrome.storage.local.set(U,void 0)},b_=function(_){var L=_.currentTarget;U.open=L.value,chrome.storage.local.set(U,void 0)},y_=function(_){var L=_.currentTarget;U.focusTabs=L.checked,chrome.storage.local.set(U,void 0)},f_=function(_){var L=_.currentTarget;U.foldersBefore=L.checked,chrome.storage.local.set(U,void 0)},F_=function(_){R=_[0],z.headerButtons.onclick=G_,z.messageUndo.lastElementChild.onclick=X_,z.main.onclick=K_,z.main.onauxclick=U_,z.main.onpointerover=H_,z.main.onkeydown=P_,z.modalConfigTheme.onchange=E_,z.modalConfigOpen.onchange=b_,z.modalConfigFocus.onchange=y_,z.modalConfigFolders.onchange=f_,z.modal.onclick=x_,z.modal.onkeydown=W_,z.modalForm.onsubmit=v_,chrome.bookmarks.getTree(A_)},I_=function(){if(z.templateDir=document.getElementById("template_dir"),z.templateDir===null)Z("DOM.templateDir is null");if(z.templateItem=document.getElementById("template_item"),z.templateItem===null)Z("DOM.templateItem is null");if(z.templateButtons=document.getElementById("template_buttons"),z.templateButtons===null)Z("DOM.templateButtons is null");if(z.headerButtons=document.getElementById("header_buttons"),z.headerButtons===null)Z("DOM.headerButtons is null");if(z.messageUndo=document.getElementById("message_undo"),z.messageUndo===null)Z("DOM.messageUndo is null");if(z.main=document.getElementById("main"),z.main===null)Z("DOM.main is null");if(z.modal=document.getElementById("modal"),z.modal===null)Z("DOM.modal is null");if(z.modalForm=document.getElementById("modal_form"),z.modalForm===null)Z("DOM.modalForm is null");if(z.modalConfigTheme=document.getElementById("modal_config-theme"),z.modalConfigTheme===null)Z("DOM.modalConfigTheme is null");if(z.modalConfigOpen=document.getElementById("modal_config-open"),z.modalConfigOpen===null)Z("DOM.modalConfigOpen is null");if(z.modalConfigFocus=document.getElementById("modal_config-focus"),z.modalConfigFocus===null)Z("DOM.modalConfigFocus is null");if(z.modalConfigFolders=document.getElementById("modal_config-folders"),z.modalConfigFolders===null)Z("DOM.modalConfigFolders is null");chrome.storage.local.get(void 0,O),chrome.tabs.query({active:!0,currentWindow:!0},F_)};var z={templateDir:null,templateItem:null,templateButtons:null,headerButtons:null,messageUndo:null,main:null,modal:null,modalConfigTheme:null,modalConfigOpen:null,modalConfigFocus:null,modalConfigFolders:null,modalForm:null,fragment:document.createDocumentFragment()},U={focusTabs:!1,foldersBefore:!0,open:"0",theme:"dark"},Y={id:"",target:null,type:"",depth:0,parentId:"",formType:""},F={title:"",url:""},$={index:void 0,parentId:void 0,title:"",url:void 0},P={BTNode:null,target:null,timeout:void 0},W={target:null,parentId:""},h={index:0,parentId:""},H=null,R=void 0,Z=function(_){throw Error(_)},x={active:!1,url:""},t=function(_,L){if(x.url=_,x.active=U.focusTabs,U.open==="0"===!L)chrome.tabs.update(R.id,x,void 0);else chrome.tabs.create(x,void 0)},I=new URL("http://t.i"),e=function(_){return I.href=chrome.runtime.getURL("/_favicon/"),I.searchParams.set("pageUrl",_),I.searchParams.set("size","16"),I.toString()},k=function(_,L,j,J){var A=j.content.cloneNode(!0),G=A.firstElementChild;G.setAttribute("data-id",_.id),G.setAttribute("data-depth",String(L)),G.setAttribute("title",_.title);var V=G.firstElementChild,Q=V.firstElementChild;Q.style.setProperty("padding-left",`${L*10}px`);var K=Q.lastElementChild;if(K.textContent=_.title,J!==void 0){var X=J.content.cloneNode(!0).children,q=X[0],C=X[1],y=X[2],o=X[3],T=X[4],p=X[5],a=X[6],D=X[7],M=X[8],f=V.children[1],E=V.children[2];f.appendChild(q),f.appendChild(C),f.appendChild(y),f.appendChild(o),T.insertAdjacentText("beforeend","Sort A-Z"),p.insertAdjacentText("beforeend","Remove folder"),E.appendChild(a),E.appendChild(D),E.appendChild(M),E.appendChild(T),E.appendChild(p)}return G},w={incognito:!1,url:[],setSelfAsOpener:!1},b={id:"",title:"",url:""};window.addEventListener("DOMContentLoaded",I_);
